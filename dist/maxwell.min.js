!function(a,b,c){function d(c,f){if(!b[c]){if(!a[c]){var g="function"==typeof require&&require;if(!f&&g)return g(c,!0);if(e)return e(c,!0);throw new Error("Cannot find module '"+c+"'")}var h=b[c]={exports:{}};a[c][0](function(b){var e=a[c][1][b];return d(e?e:b)},h,h.exports)}return b[c].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b){!function(c){(function(){var d,e,f,g;f=a("./io/CircuitLoader.coffee"),d=a("./core/circuit.coffee"),e=a("./render/renderer.coffee"),g=function(){function a(a,b){var c=this;null==b&&(b={}),this.Circuit=null,this.circuitName=b.circuitName,this.circuitName&&f.createCircuitFromJsonFile(this.circuitName,function(b){return c.Circuit=b,new e(c.Circuit,a)})}return a.Circuits={},a._loadCircuitFromFile=function(a){return f.createCircuitFromJsonFile(a)},a._loadCircuitFromJson=function(a){return f.createCircuitFromJsonData(a)},a.createCircuit=function(b,c){var e;return e=null,c?"string"==typeof c?e=a._loadCircuitFromFile(c):"object"==typeof c?e=a._loadCircuitFromJson(c):raise("Parameter must either be a path to a JSON file or raw JSON data representing the circuit.\nUse `Maxwell.createCircuit()` to create a new empty circuit object."):e=new d,this.Circuits[b]=e,e},a.foo=function(){return"foo"},a.prototype.instance_method=function(){return"instance"},a}(),"undefined"==typeof window?(console.log("Not in browsier, including maxwell..."),c.Maxwell=g):window.Maxwell=g,b.exports=g}).call(this)}(window)},{"./io/CircuitLoader.coffee":2,"./core/circuit.coffee":3,"./render/circuitCanvas.coffee":4}],2:[function(a,b){(function(){var c,d,e,f,g,h;e=a("../component/ComponentRegistry.coffee"),h=a("../core/SimulationParams.coffee"),c=a("../core/Circuit.coffee"),g=a("../scope/Oscilloscope.coffee"),f=a("../engine/Hint.coffee"),d=function(){function a(){}return a.createCircuitFromJsonData=function(a){var b,d,i,j,k,l,m,n,o,p,q,r,s,t,u;for(b=new c,d=a.shift(),b.Params=new h(a),console.log(b.Params.toString()),console.log("- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -"),console.log("Soldering Components:"),console.log("- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -"),j=[],t=0,u=a.length;u>t;t++)i=a[t],o=i.sym,n=e.ComponentDefs[o],p=parseInt(i.x1),r=parseInt(i.y1),q=parseInt(i.x2),s=parseInt(i.y2),k=parseInt(i.flags),m=i.params,null===n&&b.halt("Element: "+JSON.stringify(i)+" is null"),o===f&&console.log("Hint found in file!"),o===g&&console.log("Scope found in file!"),o||b.warn("Unrecognized Type"),n?(l=new n(p,r,q,s,k,m),j.push(l),b.solder(l)):b.warn("Unrecognized dump type: "+o);return 0===j.length&&console.error("No elements loaded. JSON most likely malformed"),b},a.createCircuitFromJsonFile=function(b,c){return null==c&&(c=null),$.getJSON(b,function(b){var d;return d=a.createCircuitFromJsonData(b),"function"==typeof c?c(d):void 0})},a}(),b.exports=d}).call(this)},{"../component/ComponentRegistry.coffee":5,"../core/SimulationParams.coffee":6,"../core/Circuit.coffee":7,"../scope/Oscilloscope.coffee":8,"../engine/Hint.coffee":9}],3:[function(a,b){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("../scope/oscilloscope.coffee"),e=a("../io/logger.coffee"),h=a("../core/simulationParams.coffee"),d=a("../engine/circuitSolver.coffee"),f=a("../util/observer.coffee"),c=function(a){function b(){this.Params=new h,this.clearAndReset()}return j(b,a),b.ON_START_UPDATE="ON_START_UPDATE",b.ON_COMPLETE_UPDATE="ON_END_UPDATE",b.ON_RESET="ON_RESET",b.ON_SOLDER="ON_SOLDER",b.ON_DESOLDER="ON_DESOLDER",b.ON_ADD_COMPONENT="ON_ADD_COMPONENT",b.ON_REMOVE_COMPONENT="ON_MOVE_COMPONENT",b.ON_MOVE_COMPONENT="ON_MOVE_COMPONENT",b.ON_ERROR="ON_ERROR",b.ON_WARNING="ON_WARNING",b.prototype.clearAndReset=function(){var a,b,c,e;for(e=null!=this.elementList,b=0,c=e.length;c>b;b++)a=e[b],a.destroy();return this.Solver=new d(this),this.nodeList=[],this.elementList=[],this.voltageSources=[],this.scopes=[],this.time=0,this.iterations=0,this.clearErrors(),this.notifyObservers(this.ON_RESET)},b.prototype.solder=function(a){return console.log("	Soldering "+a+": "+a.dump()),this.notifyObservers(this.ON_SOLDER),a.Circuit=this,a.setPoints(),this.elementList.push(a)},b.prototype.desolder=function(a,b){return null==b&&(b=!1),this.notifyObservers(this.ON_DESOLDER),a.Circuit=null,this.elementList.remove(a),b?a.destroy():void 0},b.prototype.toString=function(){return this.Params},b.prototype.updateCircuit=function(){return this.notifyObservers(this.ON_START_UPDATE),this.Solver.reconstruct(),this.Solver.isStopped?this.Solver.lastTime=0:this.Solver.solveCircuit(),this.notifyObservers(this.ON_COMPLETE_UPDATE)},b.prototype.setSelected=function(a){var b,c,d,e,f;for(e=this.elementList,f=[],c=0,d=e.length;d>c;c++)b=e[c],b===a?(console.log("Selected: "+a.dump()),this.selectedElm=a,f.push(a.setSelected(!0))):f.push(void 0);return f},b.prototype.warn=function(a){return e.warn(a),this.warnMessage=a},b.prototype.halt=function(a){return e.error(a),this.stopMessage=a},b.prototype.clearErrors=function(){return this.stopMessage=null,this.stopElm=null},b.prototype.getScopes=function(){return[]},b.prototype.findElm=function(a){var b,c,d,e;for(e=this.elementList,c=0,d=e.length;d>c;c++)if(b=e[c],a===b)return b;return!1},b.prototype.getElements=function(){return this.elementList},b.prototype.getElmByIdx=function(a){return this.elementList[a]},b.prototype.numElements=function(){return this.elementList.length},b.prototype.getVoltageSources=function(){return this.voltageSources},b.prototype.resetNodes=function(){return this.nodeList=[]},b.prototype.addCircuitNode=function(a){return this.nodeList.push(a)},b.prototype.getNode=function(a){return this.nodeList[a]},b.prototype.getNodes=function(){return this.nodeList},b.prototype.numNodes=function(){return this.nodeList.length},b.prototype.findBadNodes=function(){var a,b,c,d,e,f,g,h,i,j;for(this.badNodes=[],i=this.nodeList,e=0,g=i.length;g>e;e++)if(b=i[e],!b.intern&&1===b.links.length){for(d=0,c=b.links[0],j=this.elementList,f=0,h=j.length;h>f;f++)a=j[f],c.elm.equalTo(a)===!1&&a.boundingBox.contains(b.x,b.y)&&d++;d>0&&this.badNodes.push(b)}return this.badNodes},b.prototype.subIterations=function(){return this.Solver.subIterations},b.prototype.eachComponent=function(a){var b,c,d,e,f;for(e=this.elementList,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(a(b));return f},b.prototype.isStopped=function(){return this.Solver.isStopped},b.prototype.timeStep=function(){return this.Params.timeStep},b.prototype.voltageRange=function(){return this.Params.voltageRange},b.prototype.powerRange=function(){return this.Params.powerRange},b.prototype.currentSpeed=function(){return this.Params.currentSpeed},b.prototype.getState=function(){return this.state},b.prototype.getStamper=function(){return this.Solver.getStamper()},b}(f),b.exports=c}).call(this)},{"../scope/oscilloscope.coffee":10,"../io/logger.coffee":11,"../core/simulationParams.coffee":12,"../engine/circuitSolver.coffee":13,"../util/observer.coffee":14}],4:[function(a,b){(function(){var c,d,e,f,g,h,i,j,k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},m=function(a,b){return function(){return a.apply(b,arguments)}};g=a("../util/observer.coffee"),c=a("../core/circuit.coffee"),e=a("../component/circuitComponent.coffee"),f=a("../util/formatUtils.coffee"),j=a("../settings/settings.coffee"),h=a("../geom/rectangle.coffee"),i=function(a){function b(a,b){this.x1=a,this.y1=b}return l(b,a),b.prototype.reposition=function(a,b){var c,d,e,f;return c=Math.min(a,this.x1),d=Math.max(a,this.x1),e=Math.min(b,this.y1),f=Math.max(b,this.y1),this.x2=d,this.y2=f,this.x=this.x1=c,this.y=this.y1=e,this.width=d-c,this.height=f-e},b.prototype.draw=function(a){return a.lineWidth=.1,null!=this.x1&&null!=this.x2&&null!=this.y1&&null!=this.y2?(a.drawThickLine(this.x1,this.y1,this.x2,this.y1),a.drawThickLine(this.x1,this.y2,this.x2,this.y2),a.drawThickLine(this.x1,this.y1,this.x1,this.y2),a.drawThickLine(this.x2,this.y1,this.x2,this.y2)):void 0},b}(h),d=function(a){function b(a,b){this.Circuit=a,this.Canvas=b,this.draw=m(this.draw,this),this.mouseup=m(this.mouseup,this),this.mousedown=m(this.mousedown,this),this.mousemove=m(this.mousemove,this),this.focusedComponent=null,this.dragComponent=null,this.width=this.Canvas.width,this.height=this.Canvas.height,this.context=Sketch.augment(this.Canvas.getContext("2d"),{draw:this.draw,mousemove:this.mousemove,mousedown:this.mousedown,mouseup:this.mouseup}),this.Circuit.addObserver(a.ON_END_UPDATE,this.clear)}return l(b,a),b.prototype.mousemove=function(a){var b,c,d,e,f,g,h,i;if(c=a.offsetX,d=a.offsetY,this.snapX=this.snapGrid(c),this.snapY=this.snapGrid(d),null!=this.marquee)return null!=(g=this.marquee)?g.reposition(c,d):void 0;for(h=this.Circuit.getElements(),i=[],e=0,f=h.length;f>e;e++)b=h[e],b.getBoundingBox().contains(c,d)?(this.focusedComponent=b,i.push(this.focusedComponent.focused=!0)):i.push(void 0);return i},b.prototype.mousedown=function(a){var b,c,d,e,f,g,h;for(c=a.offsetX,d=a.offsetY,this.marquee=new i(c,d),g=this.Circuit.getElements(),h=[],e=0,f=g.length;f>e;e++)b=g[e],b.getBoundingBox().contains(c,d)?(this.dragComponent=b,b.beingDragged(!0),this.focusedComponent=b,this.focusedComponent.focused=!0,h.push(null!=this.dragComponent.toggle?this.dragComponent.toggle():void 0)):h.push(void 0);return h},b.prototype.mouseup=function(){var a;return null!=(a=this.dragComponent)&&a.beingDragged(!1),this.dragComponent=null,this.marquee=null},b.prototype.draw=function(){var a;return null!=this.snapX&&null!=this.snapY&&this.drawCircle(this.snapX,this.snapY,3,"#F00"),this.infoText(),null!=(a=this.marquee)&&a.draw(this),this.Circuit.updateCircuit(),this.drawComponents()},b.prototype.infoText=function(){var a,b,c,d,e;if(null!=this.focusedComponent){for(a=[],this.focusedComponent.getInfo(a),e=[],b=c=0,d=a.length;d>=0?d>c:c>d;b=d>=0?++c:--c)e.push(this.context.fillText(a[b],500,10*b+15));return e}},b.prototype.drawComponents=function(){var a,b,c,d,e,f;if(this.clear(),this.context){for(d=this.Circuit.getElements(),f=[],b=0,c=d.length;c>b;b++)a=d[b],(null!=(e=this.marquee)?e.collidesWithComponent(a):void 0)&&(a.focused=!0,console.log("COLLIDE: "+a.dump())),f.push(this.drawComponent(a));return f}},b.prototype.snapGrid=function(a){return a+(j.GRID_SIZE/2-1)&~(j.GRID_SIZE-1)},b.prototype.drawComponent=function(a){return a.isSelected()&&(this.context.strokeStyle="#FF0"),a.draw(this)},b.prototype.getCircuitBottom=function(){var a;return a=-1e8,this.Circuit.eachComponent(function(b){var c,d;return d=b.boundingBox,c=d.height+d.y,c>a?a=c:void 0}),a},b.prototype.drawInfo=function(){var a,b;return a=100,b=this.getCircuitBottom()-15-a,this.context.fillText("t = "+f.longFormat(this.Circuit.time)+" s",10,10),this.context.fillText("F.T. = "+this.Circuit.frames,10,20)},b.prototype.drawWarning=function(){var a,b,c,d;for(a="",c=0,d=warningStack.length;d>c;c++)b=warningStack[c],a+=b+"\n";return console.error("Simulation Warning: "+a)},b.prototype.drawError=function(){var a,b,c,d;for(b="",c=0,d=errorStack.length;d>c;c++)a=errorStack[c],b+=a+"\n";return console.error("Simulation Error: "+b)},b.prototype.fillText=function(a,b,c){return this.context.fillText(a,b,c)},b.prototype.fillCircle=function(a,b,c,d,e,f){var g,h;return null==d&&(d=j.LINE_WIDTH),null==e&&(e="#FF0000"),null==f&&(f="#000000"),g=this.context.lineWidth,h=this.context.strokeStyle,this.context.fillStyle=e,this.context.strokeStyle=f,this.context.beginPath(),this.context.lineWidth=d,this.context.arc(a,b,c,0,2*Math.PI,!0),this.context.stroke(),this.context.fill(),this.context.closePath(),this.context.strokeStyle=h,this.context.lineWidth=g},b.prototype.drawCircle=function(a,b,c,d,e){var f,g;return null==d&&(d=j.LINE_WIDTH),null==e&&(e="#000000"),f=this.context.lineWidth,g=this.context.strokeStyle,this.context.strokeStyle=e,this.context.beginPath(),this.context.lineWidth=d,this.context.arc(a,b,c,0,2*Math.PI,!0),this.context.stroke(),this.context.closePath(),this.context.lineWidth=f,this.context.strokeStyle=g},b.prototype.drawThickLinePt=function(a,b,c){return this.drawThickLine(a.x,a.y,b.x,b.y,c)},b.prototype.drawThickLine=function(a,b,c,d,e){var f,g;return null==e&&(e=j.FG_COLOR),f=this.context.lineWidth,g=this.context.strokeStyle,this.context.strokeStyle=e,this.context.beginPath(),this.context.moveTo(a,b),this.context.lineTo(c,d),this.context.stroke(),this.context.closePath(),this.context.lineWidth=f,this.context.strokeStyle=g},b.prototype.drawThickPolygon=function(a,b,c){var d,e,f;for(d=e=0,f=a.length-1;f>=0?f>e:e>f;d=f>=0?++e:--e)this.drawThickLine(a[d],b[d],a[d+1],b[d+1],c);return this.drawThickLine(a[d],b[d],a[0],b[0],c)},b.prototype.drawThickPolygonP=function(a,b){var c,d,e,f;for(d=a.numPoints(),c=e=0,f=d-1;f>=0?f>e:e>f;c=f>=0?++e:--e)this.drawThickLine(a.getX(c),a.getY(c),a.getX(c+1),a.getY(c+1),b);return this.drawThickLine(a.getX(c),a.getY(c),a.getX(0),a.getY(0),b)},b.prototype.clear=function(){},b}(g),b.exports=d}).call(this)},{"../util/observer.coffee":14,"../core/circuit.coffee":3,"../component/circuitComponent.coffee":15,"../util/formatUtils.coffee":16,"../settings/settings.coffee":17,"../geom/rectangle.coffee":18}],6:[function(a,b){(function(){var a;a=function(){function a(a){if(this.completionStatus=(null!=a?a.completion_status:void 0)||"in development",this.createdAt=null!=a?a.created_at:void 0,this.currentSpeed=(null!=a?a.current_speed:void 0)||63,this.updatedAt=null!=a?a.updated_at:void 0,this.description=(null!=a?a.description:void 0)||"",this.flags=(null!=a?a.flags:void 0)||1,this.id=(null!=a?a.id:void 0)||null,this.name=(null!=a?a.name_unique:void 0)||"default",this.powerRange=(null!=a?a.power_range:void 0)||62,this.voltageRange=(null!=a?a.voltage_range:void 0)||10,this.simSpeed=this.convertSimSpeed((null!=a?a.sim_speed:void 0)||10),this.timeStep=(null!=a?a.time_step:void 0)||5e-6,this.title=(null!=a?a.title:void 0)||"Default",this.topic=(null!=a?a.topic:void 0)||null,null==this.timeStep)throw new Error("Circuit params is missing its time step (was null)!")}return a.prototype.toString=function(){return["",""+this.title,"================================================================","	Name:        "+this.name,"	Topic:       "+this.topic,"	Status:      "+this.completionStatus,"	Created at:  "+this.createdAt,"	Updated At:  "+this.updatedAt,"	Description: "+this.description,"	Id:          "+this.id,"	Title:       "+this.title,"----------------------------------------------------------------","	Flags:       "+this.flags,"	TimeStep:    "+this.timeStep,"	Sim Speed:   "+this.simSpeed,"	Cur Speed:   "+this.currentSpeed,"	Volt. Range: "+this.voltageRange,"	Pwr Range:   "+this.powerRange,""].join("\n")},a.prototype.convertSimSpeed=function(a){return Math.floor(24*Math.log(10*a)+61.5)},a.prototype.setCurrentMult=function(a){return this.currentMult=a},a.prototype.getCurrentMult=function(){return this.currentMult},a}(),b.exports=a}).call(this)},{}],10:[function(a,b){(function(){var a;a=function(){function a(a){var b,c,d,e,f=this;for(this.timeStep=null!=a?a:1,this.timeBase=0,this.frames=0,this.seriesData=[[],[],[],[],[],[],[],[],[]],d=150,b=document.getElementById("chart"),c=e=0;d>=0?d>=e:e>=d;c=d>=0?++e:--e)this.addData(0);setInterval(function(){return f.step(),graph.update()},40)}return a.prototype.step=function(){return this.frames+=1,this.removeData(1),this.addData(.5*Math.sin(this.frames/10)+.5)},a.prototype.addData=function(a){var b,c,d,e,f,g;for(b=this.seriesData[0].length,f=this.seriesData,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.push({x:b*this.timeStep+this.timeBase,y:a}));return g},a.prototype.removeData=function(){var a,b,c,d;for(d=this.seriesData,b=0,c=d.length;c>b;b++)a=d[b],a.shift();return this.timeBase+=this.timeStep},a}(),b.exports=a}).call(this)},{}],12:[function(a,b){(function(){var a;a=function(){function a(a){if(this.completionStatus=(null!=a?a.completion_status:void 0)||"in development",this.createdAt=null!=a?a.created_at:void 0,this.currentSpeed=(null!=a?a.current_speed:void 0)||63,this.updatedAt=null!=a?a.updated_at:void 0,this.description=(null!=a?a.description:void 0)||"",this.flags=(null!=a?a.flags:void 0)||1,this.id=(null!=a?a.id:void 0)||null,this.name=(null!=a?a.name_unique:void 0)||"default",this.powerRange=(null!=a?a.power_range:void 0)||62,this.voltageRange=(null!=a?a.voltage_range:void 0)||10,this.simSpeed=this.convertSimSpeed((null!=a?a.sim_speed:void 0)||10),this.timeStep=(null!=a?a.time_step:void 0)||5e-6,this.title=(null!=a?a.title:void 0)||"Default",this.topic=(null!=a?a.topic:void 0)||null,null==this.timeStep)throw new Error("Circuit params is missing its time step (was null)!")}return a.prototype.toString=function(){return["",""+this.title,"================================================================","	Name:        "+this.name,"	Topic:       "+this.topic,"	Status:      "+this.completionStatus,"	Created at:  "+this.createdAt,"	Updated At:  "+this.updatedAt,"	Description: "+this.description,"	Id:          "+this.id,"	Title:       "+this.title,"----------------------------------------------------------------","	Flags:       "+this.flags,"	TimeStep:    "+this.timeStep,"	Sim Speed:   "+this.simSpeed,"	Cur Speed:   "+this.currentSpeed,"	Volt. Range: "+this.voltageRange,"	Pwr Range:   "+this.powerRange,""].join("\n")},a.prototype.convertSimSpeed=function(a){return Math.floor(24*Math.log(10*a)+61.5)},a.prototype.setCurrentMult=function(a){return this.currentMult=a},a.prototype.getCurrentMult=function(){return this.currentMult},a}(),b.exports=a}).call(this)},{}],8:[function(a,b){(function(){var a;a=function(){function a(a){var b,c,d,e,f=this;for(this.timeStep=null!=a?a:1,this.timeBase=0,this.frames=0,this.seriesData=[[],[],[],[],[],[],[],[],[]],d=150,b=document.getElementById("chart"),c=e=0;d>=0?d>=e:e>=d;c=d>=0?++e:--e)this.addData(0);setInterval(function(){return f.step(),graph.update()},40)}return a.prototype.step=function(){return this.frames+=1,this.removeData(1),this.addData(.5*Math.sin(this.frames/10)+.5)},a.prototype.addData=function(a){var b,c,d,e,f,g;for(b=this.seriesData[0].length,f=this.seriesData,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.push({x:b*this.timeStep+this.timeBase,y:a}));return g},a.prototype.removeData=function(){var a,b,c,d;for(d=this.seriesData,b=0,c=d.length;c>b;b++)a=d[b],a.shift();return this.timeBase+=this.timeStep},a}(),b.exports=a}).call(this)},{}],9:[function(a,b){(function(){var a;a=function(){function a(a){this.Circuit=a}return a.HINT_LC="@HINT_LC",a.HINT_RC="@HINT_RC",a.HINT_3DB_C="@HINT_3DB_C",a.HINT_TWINT="@HINT_TWINT",a.HINT_3DB_L="@HINT_3DB_L",a.hintType=-1,a.hintItem1=-1,a.hintItem2=-1,a.prototype.readHint=function(a){return"string"==typeof a&&(a=a.split(" ")),this.hintType=a[0],this.hintItem1=a[1],this.hintItem2=a[2]},a.prototype.getHint=function(){var a,b,c,d,e;return a=this.Circuit.getElmByIdx(this.hintItem1),b=this.Circuit.getElmByIdx(this.hintItem2),null==a||null==b?null:this.hintType===this.HINT_LC?a instanceof InductorElm&&b instanceof CapacitorElm?(d=a,c=b,"res.f = "+getUnitText(1/(2*Math.PI*Math.sqrt(d.inductance*c.capacitance)),"Hz")):null:this.hintType===this.HINT_RC?a instanceof ResistorElm&&b instanceof CapacitorElm?(e=a,c=b,"RC = "+getUnitText(e.resistance*c.capacitance,"s")):null:this.hintType===this.HINT_3DB_C?a instanceof ResistorElm&&b instanceof CapacitorElm?(e=a,c=b,"f.3db = "+getUnitText(1/(2*Math.PI*e.resistance*c.capacitance),"Hz")):null:this.hintType===this.HINT_3DB_L?a instanceof ResistorElm&&b instanceof InductorElm?(e=a,d=b,"f.3db = "+getUnitText(e.resistance/(2*Math.PI*d.inductance),"Hz")):null:this.hintType===this.HINT_TWINT&&a instanceof ResistorElm&&b instanceof CapacitorElm?(e=a,c=b,"fc = "+getUnitText(1/(2*Math.PI*e.resistance*c.capacitance),"Hz")):null},a}(),b.exports=a}).call(this)},{}],11:[function(a,b){(function(){var a;a=function(){function a(){}var b,c;return b=new Array,c=new Array,a.error=function(a){return console.error("Error: "+a),b.push(a)},a.warn=function(a){return console.error("Warning: "+a),c.push(a)},a}(),b.exports=a}).call(this)},{}],14:[function(a,b){(function(){var a,c=[].slice;a=function(){function a(){}return a.prototype.addObserver=function(a,b){var c;return this._events||(this._events={}),(c=this._events)[a]||(c[a]=[]),this._events[a].push(b)},a.prototype.removeObserver=function(a,b){return this._events||(this._events={}),this._events[a]?this._events[a].splice(this._events[a].indexOf(b),1):void 0},a.prototype.notifyObservers=function(){var a,b,d,e,f,g,h;if(d=arguments[0],a=2<=arguments.length?c.call(arguments,1):[],this._events||(this._events={}),this._events[d]){for(g=this._events[d],h=[],e=0,f=g.length;f>e;e++)b=g[e],h.push(b.apply(this,a));return h}},a.prototype.getObservers=function(){return this._events},a}(),b.exports=a}).call(this)},{}],16:[function(a,b){(function(){var a;a=function(){function a(){}return a.showFormat=function(a){return a.toPrecision(2)},a.shortFormat=function(a){return a.toPrecision(1)},a.longFormat=function(a){return a.toPrecision(4)},a.noCommaFormat=function(a){return a.replace(/,/g,"")},a.commaFormat=function(a){var b,c,d,e;for(a+="",c=a.split("."),d=c[0],e=c.length>1?"."+c[1]:"",b=/(\d+)(\d{3})/;b.test(d);)d=d.replace(b,"$1,$2");return d+e},a}(),b.exports=a}).call(this)},{}],17:[function(a,b){!function(){(function(){var a;a=function(){function a(){}var b;return b={voltageScale:["#ff0000","#f70707","#ef0f0f","#e71717","#df1f1f","#d72727","#cf2f2f","#c73737","#bf3f3f","#b74747","#af4f4f","#a75757","#9f5f5f","#976767","#8f6f6f","#877777","#7f7f7f","#778777","#6f8f6f","#679767","#5f9f5f","#57a757","#4faf4f","#47b747","#3fbf3f","#37c737","#2fcf2f","#27d727","#1fdf1f","#17e717","#0fef0f","#07f707","#00ff00"],aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},a.FRACTIONAL_DIGITS=2,a.CURRENT_SEGMENT_LENGTH=16,a.POST_RADIUS=1,a.CURRENT_RADIUS=1,a.LINE_WIDTH=2,a.GRID_SIZE=16,a.SMALL_GRID=!1,a.SHOW_VALUES=!1,a.SELECT_COLOR=b.orange,a.POST_COLOR_SELECTED=b.orange,a.POST_COLOR=b.black,a.DOTS_COLOR=b.yellow,a.DOTS_OUTLINE=b.orange,a.TEXT_COLOR=b.black,a.TEXT_ERROR_COLOR=b.red,a.TEXT_WARNING_COLOR=b.yellow,a.SELECTION_MARQUEE_COLOR=b.orange,a.GRID_COLOR=b.darkyellow,a.BG_COLOR=b.white,a.FG_COLOR=b.darkgray,a.ERROR_COLOR=b.darkred,a.WARNING_COLOR=b.orange,a}(),b.exports=a}).call(this)}()},{}],18:[function(a,b){(function(){var a;a=function(){function a(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d}return a.prototype.contains=function(a,b){return a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height},a.prototype.equals=function(a){return null!=a&&a.x===this.x&&a.y===this.y&&a.width===this.width&&a.height===this.height?!0:!1},a.prototype.intersects=function(a){var b,c,d,e;return this.x2=this.x+this.width,this.y2=this.y+this.height,b=a.x,d=a.y,c=a.x+a.width,e=a.y+a.height,this.x<c&&this.x2>b&&this.y<e&&this.y2>d},a.prototype.collidesWithComponent=function(a){return this.intersects(a.getBoundingBox())},a}(),b.exports=a}).call(this)},{}],7:[function(a,b){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("../scope/oscilloscope.coffee"),e=a("../io/logger.coffee"),h=a("../core/simulationParams.coffee"),d=a("../engine/circuitSolver.coffee"),f=a("../util/observer.coffee"),c=function(a){function b(){this.Params=new h,this.clearAndReset()}return j(b,a),b.ON_START_UPDATE="ON_START_UPDATE",b.ON_COMPLETE_UPDATE="ON_END_UPDATE",b.ON_RESET="ON_RESET",b.ON_SOLDER="ON_SOLDER",b.ON_DESOLDER="ON_DESOLDER",b.ON_ADD_COMPONENT="ON_ADD_COMPONENT",b.ON_REMOVE_COMPONENT="ON_MOVE_COMPONENT",b.ON_MOVE_COMPONENT="ON_MOVE_COMPONENT",b.ON_ERROR="ON_ERROR",b.ON_WARNING="ON_WARNING",b.prototype.clearAndReset=function(){var a,b,c,e;for(e=null!=this.elementList,b=0,c=e.length;c>b;b++)a=e[b],a.destroy();return this.Solver=new d(this),this.nodeList=[],this.elementList=[],this.voltageSources=[],this.scopes=[],this.time=0,this.iterations=0,this.clearErrors(),this.notifyObservers(this.ON_RESET)},b.prototype.solder=function(a){return console.log("	Soldering "+a+": "+a.dump()),this.notifyObservers(this.ON_SOLDER),a.Circuit=this,a.setPoints(),this.elementList.push(a)},b.prototype.desolder=function(a,b){return null==b&&(b=!1),this.notifyObservers(this.ON_DESOLDER),a.Circuit=null,this.elementList.remove(a),b?a.destroy():void 0},b.prototype.toString=function(){return this.Params},b.prototype.updateCircuit=function(){return this.notifyObservers(this.ON_START_UPDATE),this.Solver.reconstruct(),this.Solver.isStopped?this.Solver.lastTime=0:this.Solver.solveCircuit(),this.notifyObservers(this.ON_COMPLETE_UPDATE)},b.prototype.setSelected=function(a){var b,c,d,e,f;for(e=this.elementList,f=[],c=0,d=e.length;d>c;c++)b=e[c],b===a?(console.log("Selected: "+a.dump()),this.selectedElm=a,f.push(a.setSelected(!0))):f.push(void 0);return f},b.prototype.warn=function(a){return e.warn(a),this.warnMessage=a},b.prototype.halt=function(a){return e.error(a),this.stopMessage=a},b.prototype.clearErrors=function(){return this.stopMessage=null,this.stopElm=null},b.prototype.getScopes=function(){return[]},b.prototype.findElm=function(a){var b,c,d,e;for(e=this.elementList,c=0,d=e.length;d>c;c++)if(b=e[c],a===b)return b;return!1},b.prototype.getElements=function(){return this.elementList},b.prototype.getElmByIdx=function(a){return this.elementList[a]},b.prototype.numElements=function(){return this.elementList.length},b.prototype.getVoltageSources=function(){return this.voltageSources},b.prototype.resetNodes=function(){return this.nodeList=[]},b.prototype.addCircuitNode=function(a){return this.nodeList.push(a)},b.prototype.getNode=function(a){return this.nodeList[a]},b.prototype.getNodes=function(){return this.nodeList},b.prototype.numNodes=function(){return this.nodeList.length},b.prototype.findBadNodes=function(){var a,b,c,d,e,f,g,h,i,j;for(this.badNodes=[],i=this.nodeList,e=0,g=i.length;g>e;e++)if(b=i[e],!b.intern&&1===b.links.length){for(d=0,c=b.links[0],j=this.elementList,f=0,h=j.length;h>f;f++)a=j[f],c.elm.equalTo(a)===!1&&a.boundingBox.contains(b.x,b.y)&&d++;d>0&&this.badNodes.push(b)}return this.badNodes},b.prototype.subIterations=function(){return this.Solver.subIterations},b.prototype.eachComponent=function(a){var b,c,d,e,f;for(e=this.elementList,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(a(b));return f},b.prototype.isStopped=function(){return this.Solver.isStopped},b.prototype.timeStep=function(){return this.Params.timeStep},b.prototype.voltageRange=function(){return this.Params.voltageRange},b.prototype.powerRange=function(){return this.Params.powerRange},b.prototype.currentSpeed=function(){return this.Params.currentSpeed},b.prototype.getState=function(){return this.state},b.prototype.getStamper=function(){return this.Solver.getStamper()},b}(f),b.exports=c}).call(this)},{"../scope/oscilloscope.coffee":10,"../io/logger.coffee":11,"../core/simulationParams.coffee":12,"../engine/circuitSolver.coffee":13,"../util/observer.coffee":14}],19:[function(a,b){var c=b.exports={};c.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),c.title="browser",c.browser=!0,c.env={},c.argv=[],c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")}},{}],5:[function(a,b){!function(c){(function(){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;w=a("./components/WireElm.coffee"),o=a("./components/ResistorElm.coffee"),h=a("./components/GroundElm.coffee"),v=a("./components/VoltageElm.coffee"),g=a("./components/DiodeElm.coffee"),l=a("./components/OutputElm.coffee"),r=a("./components/SwitchElm.coffee"),d=a("./components/CapacitorElm.coffee"),i=a("./components/InductorElm.coffee"),p=a("./components/SparkGapElm.coffee"),f=a("./components/CurrentElm.coffee"),n=a("./components/RailElm.coffee"),j=a("./components/MosfetElm.coffee"),t=a("./components/TransistorElm.coffee"),u=a("./components/VarRailElm.coffee"),k=a("./components/OpAmpElm.coffee"),x=a("./components/ZenerElm.coffee"),q=a("./components/Switch2Elm.coffee"),s=a("./components/TextElm.coffee"),m=a("./components/ProbeElm.coffee"),e=function(){function a(){}return a.ComponentDefs={w:w,r:o,g:h,l:i,c:d,v:v,d:g,s:r,187:p,a:k,f:j,R:n,172:u,z:x,i:f,t:t,S:q,x:s,o:m,O:l},a.registerAll=function(){var a,b,d,e,f;for(e=this.ComponentDefs,f=[],b=0,d=e.length;d>b;b++)a=e[b],"development"===c.env.NODE_ENV&&console.log("Registering Element: "+a.prototype+" "),f.push(this.register(a));
return f},a.register=function(a){var b,c,d,e;null==a&&console.error("nil constructor");try{return e=new a(0,0,0,0,0,null),c=e.getDumpType(),b=a,null==e&&console.error("Component is nil!"),this.dumpTypes[c]===b?void console.log(""+a+" is a dump class"):null!=this.dumpTypes[c]?void console.log("Dump type conflict: "+c+" "+this.dumpTypes[c]):this.dumpTypes[c]=a}catch(f){return d=f,Logger.warn("Element: "+a.prototype+" Not yet implemented: ["+d.message+"]")}},a}(),b.exports=e}).call(this)}(a("__browserify_process"))},{"./components/WireElm.coffee":20,"./components/ResistorElm.coffee":21,"./components/GroundElm.coffee":22,"./components/VoltageElm.coffee":23,"./components/DiodeElm.coffee":24,"./components/OutputElm.coffee":25,"./components/SwitchElm.coffee":26,"./components/CapacitorElm.coffee":27,"./components/InductorElm.coffee":28,"./components/SparkGapElm.coffee":29,"./components/CurrentElm.coffee":30,"./components/RailElm.coffee":31,"./components/MosfetElm.coffee":32,"./components/TransistorElm.coffee":33,"./components/VarRailElm.coffee":34,"./components/OpAmpElm.coffee":35,"./components/ZenerElm.coffee":36,"./components/Switch2Elm.coffee":37,"./components/TextElm.coffee":38,"./components/ProbeElm.coffee":39,__browserify_process:19}],13:[function(a,b){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;k=a("./matrixStamper.coffee"),l=a("./graphTraversal/pathfinder.coffee"),e=a("./graphTraversal/circuitNode.coffee"),f=a("./graphTraversal/circuitNodeLink.coffee"),n=a("./rowInfo.coffee"),o=a("../settings/settings.coffee"),c=a("../util/ArrayUtils.coffee"),i=a("../component/components/GroundElm.coffee"),m=a("../component/components/RailElm.coffee"),p=a("../component/components/VoltageElm.coffee"),q=a("../component/components/WireElm.coffee"),d=a("../component/components/CapacitorElm.coffee"),j=a("../component/components/InductorElm.coffee"),h=a("../component/components/CurrentElm.coffee"),g=function(){function a(a){this.Circuit=a,this.scaleFactors=c.zeroArray(400),this.reset(),this.Stamper=new k(this.Circuit)}return a.prototype.reset=function(){return this.Circuit.time=0,this.Circuit.frames=0,this.converged=!0,this.subIterations=5e3,this.circuitMatrix=[],this.circuitRightSide=[],this.origMatrix=[],this.origRightSide=[],this.circuitRowInfo=[],this.circuitPermute=[],this.circuitNonLinear=!1,this.lastTime=0,this.secTime=0,this.lastFrameTime=0,this.lastIterTime=0,this.analyzeFlag=!0},a.prototype._updateTimings=function(a){var b,c,d;return this.lastIterTime=a,d=(new Date).getTime(),0!==this.lastTime&&(c=Math.floor(d-this.lastTime),b=Math.exp(this.Circuit.currentSpeed()/3.5-14.2),this.Circuit.Params.setCurrentMult(1.7*c*b)),d-this.secTime>=1e3&&(console.log("Reset!"),this.frames=0,this.steps=0,this.secTime=d),this.lastTime=d,this.lastFrameTime=this.lastTime},a.prototype.getStamper=function(){return this.Stamper},a.prototype.getIterCount=function(){var a;return a=150,.1*Math.exp((a-61)/24)},a.prototype.reconstruct=function(){var a,b,g,k,o,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb;if(this.analyzeFlag&&0!==this.Circuit.numElements()){for(this.Circuit.clearErrors(),this.Circuit.resetNodes(),Z=0,x=!1,y=!1,Y=null,rb=this.Circuit.getElements(),eb=0,ib=rb.length;ib>eb;eb++){if(a=rb[eb],a instanceof i){console.log("Found ground"),x=!0;break}a instanceof m&&(console.log("Got rail"),y=!0),null==Y&&a instanceof p&&(console.log("Ve"),Y=a)}for(x||null==Y||y?(t=new e,t.x=t.y=-1,this.Circuit.addCircuitNode(t)):(t=new e,N=Y.getPost(0),console.log("GOT GROUND cn="+t+", pt="+N),t.x=N.x,t.y=N.y,this.Circuit.addCircuitNode(t)),z=fb=0,sb=this.Circuit.numElements();sb>=0?sb>fb:fb>sb;z=sb>=0?++fb:--fb){for(k=this.Circuit.getElmByIdx(z),B=k.getInternalNodeCount(),C=k.getVoltageSourceCount(),L=k.getPostCount(),D=gb=0;L>=0?L>gb:gb>L;D=L>=0?++gb:--gb){for(M=k.getPost(D),console.log("D: "+k.dump()),E=0;E<this.Circuit.numNodes();){if(t=this.Circuit.getNode(E),console.log("j="+D+"  k="+E+"  pt="+M+"  "+t),M.x===t.x&&M.y===t.y){console.log(""+z+" Break!");break}E++}console.log("NUM NODES: "+z+" "+this.Circuit.numNodes()),E===this.Circuit.numNodes()?(t=new e,t.x=M.x,t.y=M.y,o=new f,o.num=D,o.elm=k,t.links.push(o),k.setNode(D,this.Circuit.numNodes()),this.Circuit.addCircuitNode(t)):(u=new f,u.num=D,u.elm=k,this.Circuit.getNode(E).links.push(u),k.setNode(D,E),0===E&&k.setNodeVoltage(D,0))}for(D=hb=0;B>=0?B>hb:hb>B;D=B>=0?++hb:--hb)t=new e(null,null,!0),u=new f,u.num=D+L,u.elm=k,t.links.push(u),k.setNode(u.num,this.Circuit.numNodes()),this.Circuit.addCircuitNode(t);Z+=C}for(this.Circuit.voltageSources=new Array(Z),Z=0,this.circuitNonLinear=!1,Cb=this.Circuit.getElements(),lb=0,jb=Cb.length;jb>lb;lb++)for(g=Cb[lb],g.nonLinear()&&(this.circuitNonLinear=!0),C=g.getVoltageSourceCount(),D=mb=0;C>=0?C>mb:mb>C;D=C>=0?++mb:--mb)this.Circuit.voltageSources[Z]=g,g.setVoltageSource(D,Z++);for(this.Circuit.voltageSourceCount=Z,this.matrixSize=this.Circuit.numNodes()-1+Z,this.circuitMatrixSize=this.circuitMatrixFullSize=this.matrixSize,this.circuitMatrix=c.zeroArray2(this.matrixSize,this.matrixSize),this.origMatrix=c.zeroArray2(this.matrixSize,this.matrixSize),this.circuitRightSide=c.zeroArray(this.matrixSize),this.origRightSide=c.zeroArray(this.matrixSize),this.circuitRowInfo=c.zeroArray(this.matrixSize),this.circuitPermute=c.zeroArray(this.matrixSize),$=0,z=nb=0,Db=this.matrixSize;Db>=0?Db>nb:nb>Db;z=Db>=0?++nb:--nb)this.circuitRowInfo[z]=new n;for(this.circuitNeedsMap=!1,Eb=this.Circuit.getElements(),ob=0,kb=Eb.length;kb>ob;ob++)k=Eb[ob],k.stamp(this.Stamper);for(s=new Array(this.Circuit.numNodes()),X=new Array(this.Circuit.numNodes()),s[0]=!0,b=!0;b;){for(b=!1,z=pb=0,Fb=this.Circuit.numElements();Fb>=0?Fb>pb:pb>Fb;z=Fb>=0?++pb:--pb)for(k=this.Circuit.getElmByIdx(z),D=qb=0,Gb=k.getPostCount();Gb>=0?Gb>qb:qb>Gb;D=Gb>=0?++qb:--qb)if(s[k.getNode(D)])for(E=Lb=0,Hb=k.getPostCount();Hb>=0?Hb>Lb:Lb>Hb;E=Hb>=0?++Lb:--Lb)D!==E&&(F=k.getNode(E),k.getConnection(D,E)&&!s[F]&&(s[F]=!0,b=!0));else k.hasGroundConnection(D)&&(b=!0,s[k.getNode(D)]=!0);if(!b)for(z=Mb=0,Ib=this.Circuit.numNodes();Ib>=0?Ib>Mb:Mb>Ib;z=Ib>=0?++Mb:--Mb)if(!s[z]&&!this.Circuit.nodeList[z].intern){console.warn("Node "+z+" unconnected!"),this.Stamper.stampResistor(0,z,1e8),s[z]=!0,b=!0;break}}for(z=Nb=0,Jb=this.Circuit.numElements();Jb>=0?Jb>Nb:Nb>Jb;z=Jb>=0?++Nb:--Nb){if(a=this.Circuit.getElmByIdx(z),a instanceof j&&(w=new l(l.INDUCT,a,a.getNode(1),this.Circuit.getElements(),this.Circuit.numNodes()),w.findPath(a.getNode(0),5)||w.findPath(a.getNode(0))||a.reset()),a instanceof h&&(w=new l(l.INDUCT,a,a.getNode(1),this.Circuit.getElements(),this.Circuit.numNodes()),!w.findPath(a.getNode(0))))return void this.Circuit.halt("No path for current source!",a);if((a instanceof p&&2===a.getPostCount()||a instanceof q)&&(console.log("Examining Loop: "+a.dump()),K=new l(l.VOLTAGE,a,a.getNode(1),this.Circuit.getElements(),this.Circuit.numNodes()),K.findPath(a.getNode(0))&&this.Circuit.halt("Voltage source/wire loop with no resistance!",a)),a instanceof d)if(w=new l(l.SHORT,a,a.getNode(1),this.Circuit.getElements(),this.Circuit.numNodes()),w.findPath(a.getNode(0)))a.reset();else if(w=new l(l.CAP_V,a,a.getNode(1),this.Circuit.getElements(),this.Circuit.numNodes()),w.findPath(a.getNode(0)))return void this.Circuit.halt("Capacitor loop with no resistance!",a)}for(z=Ob=0,tb=this.matrixSize;tb>=0?tb>Ob:Ob>tb;z=tb>=0?++Ob:--Ob)if(P=-1,Q=-1,S=0,T=this.circuitRowInfo[z],!(T.lsChanges||T.dropRow||T.rsChanges)){for(W=0,D=Pb=0,ub=this.matrixSize;ub>=0?ub>Pb:Pb>ub;D=ub>=0?++Pb:--Pb)if(O=this.circuitMatrix[z][D],this.circuitRowInfo[D].type!==n.ROW_CONST){if(0!==O)if(-1!==Q){if(-1!==P||O!==-S)break;P=D}else Q=D,S=O}else W-=this.circuitRowInfo[D].value*O;if(D===this.matrixSize){if(-1===Q)return void this.Circuit.halt("Matrix error qp (rsadd = "+W+")",null);if(v=this.circuitRowInfo[Q],-1===P){for(E=0;v.type===n.ROW_EQUAL&&100>E;)Q=v.nodeEq,v=this.circuitRowInfo[Q],++E;if(v.type===n.ROW_EQUAL){v.type=n.ROW_NORMAL;continue}if(v.type!==n.ROW_NORMAL)continue;v.type=n.ROW_CONST,v.value=(this.circuitRightSide[z]+W)/S,this.circuitRowInfo[z].dropRow=!0,console.error("iter = 0 # start over from scratch"),z=-1}else if(this.circuitRightSide[z]+W===0){if(v.type!==n.ROW_NORMAL&&(R=P,P=Q,Q=R,v=this.circuitRowInfo[Q],v.type!==n.ROW_NORMAL)){console.error("Swap failed!");continue}v.type=n.ROW_EQUAL,v.nodeEq=P,this.circuitRowInfo[z].dropRow=!0}}}for(G=0,z=Qb=0,vb=this.matrixSize;vb>=0?vb>Qb:Qb>vb;z=vb>=0?++Qb:--Qb)if(U=this.circuitRowInfo[z],U.type!==n.ROW_NORMAL){if(U.type===n.ROW_EQUAL)for(;D!==function(){for(Kb=[],Rb=0;100>Rb;Rb++)Kb.push(Rb);return Kb}.apply(this)&&(V=this.circuitRowInfo[U.nodeEq],V.type===n.ROW_EQUAL)&&z!==V.nodeEq;)U.nodeEq=V.nodeEq;U.type===n.ROW_CONST&&(U.mapCol=-1)}else U.mapCol=G++;for(z=Sb=0,wb=this.matrixSize;wb>=0?wb>Sb:Sb>wb;z=wb>=0?++Sb:--Sb)U=this.circuitRowInfo[z],U.type===n.ROW_EQUAL&&(V=this.circuitRowInfo[U.nodeEq],V.type===n.ROW_CONST?(U.type=V.type,U.value=V.value,U.mapCol=-1):U.mapCol=V.mapCol);for(J=G,H=c.zeroArray2(J,J),I=new Array(J),c.zeroArray(I),A=0,z=_=0,xb=this.matrixSize;xb>=0?xb>_:_>xb;z=xb>=0?++_:--_)if(r=this.circuitRowInfo[z],r.dropRow)r.mapRow=-1;else{for(I[A]=this.circuitRightSide[z],r.mapRow=A,D=ab=0,yb=this.matrixSize;yb>=0?yb>ab:ab>yb;D=yb>=0?++ab:--ab)U=this.circuitRowInfo[D],U.type===n.ROW_CONST?I[A]-=U.value*this.circuitMatrix[z][D]:H[A][U.mapCol]+=this.circuitMatrix[z][D];A++}for(this.circuitMatrix=H,this.circuitRightSide=I,this.matrixSize=this.circuitMatrixSize=J,z=bb=0,zb=this.matrixSize;zb>=0?zb>bb:bb>zb;z=zb>=0?++bb:--bb)this.origRightSide[z]=this.circuitRightSide[z];for(z=cb=0,Ab=this.matrixSize;Ab>=0?Ab>cb:cb>Ab;z=Ab>=0?++cb:--cb)for(D=db=0,Bb=this.matrixSize;Bb>=0?Bb>db:db>Bb;D=Bb>=0?++db:--db)this.origMatrix[z][D]=this.circuitMatrix[z][D];this.circuitNeedsMap=!0,this.analyzeFlag=!1,this.circuitNonLinear||this.luFactor(this.circuitMatrix,this.circuitMatrixSize,this.circuitPermute)||this.Circuit.halt("Singular matrix in linear circuit!",null)}},a.prototype.solveCircuit=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;if(this.sysTime=(new Date).getTime(),null==this.circuitMatrix||0===this.Circuit.numElements())return void(this.circuitMatrix=null);if(d=this.dumpMatrix,this.dumpMatrix=!1,l=Math.floor(160*this.getIterCount()),p=(new Date).getTime(),i=this.lastIterTime,!(1e3>=l*(p-this.lastIterTime))){for(f=1;;){for(B=this.Circuit.getElements(),q=0,u=B.length;u>q;q++)a=B[q],a.startIteration();for(++this.steps,o=5e3,m=r=0;o>=0?o>r:r>o;m=o>=0?++r:--r){for(this.converged=!0,this.subIterations=m,e=s=0,C=this.circuitMatrixSize;C>=0?C>s:s>C;e=C>=0?++s:--s)this.circuitRightSide[e]=this.origRightSide[e];if(this.circuitNonLinear)for(e=t=0,D=this.circuitMatrixSize;D>=0?D>t:t>D;e=D>=0?++t:--t)for(g=x=0,E=this.circuitMatrixSize;E>=0?E>x:x>E;g=E>=0?++x:--x)this.circuitMatrix[e][g]=this.origMatrix[e][g];for(F=this.Circuit.getElements(),y=0,v=F.length;v>y;y++)a=F[y],a.doStep(this.Stamper);if(null!=this.stopMessage)return;if(d=!1,this.circuitNonLinear){if(this.converged&&m>0)break;if(!this.luFactor(this.circuitMatrix,this.circuitMatrixSize,this.circuitPermute))return void this.Circuit.halt("Singular matrix in nonlinear circuit!",null)}for(this.luSolve(this.circuitMatrix,this.circuitMatrixSize,this.circuitPermute,this.circuitRightSide),g=z=0,G=this.circuitMatrixFullSize;G>=0?G>z:z>G;g=G>=0?++z:--z){if(k=this.circuitRowInfo[g],j=0,j=k.type===n.ROW_CONST?k.value:this.circuitRightSide[k.mapCol],isNaN(j)){this.converged=!1;break}if(g<this.Circuit.numNodes()-1)for(b=this.Circuit.nodeList[g+1],H=b.links,A=0,w=H.length;w>A;A++)c=H[A],c.elm.setNodeVoltage(c.num,j);else h=g-(this.Circuit.numNodes()-1),this.Circuit.voltageSources[h].setCurrent(h,j)}if(!this.circuitNonLinear)break;m++}if(m>5&&console.log("converged after "+m+" iterations\n"),m>=o){this.halt("Convergence failed: "+m,null);break}if(this.Circuit.time+=this.Circuit.timeStep(),p=(new Date).getTime(),i=p,1e3*f>=l*(p-this.lastIterTime))break;if(p-this.lastFrameTime>500)break;++f}return this.frames++,this.Circuit.iterations++,this._updateTimings(i)}},a.prototype.luFactor=function(a,b,c){var d,e,f,g,h,i,j,k;for(d=0;b>d;){for(g=0,e=0;b>e;)k=Math.abs(a[d][e]),k>g&&(g=k),++e;if(0===g)return!1;this.scaleFactors[d]=1/g,++d}for(e=0;b>e;){for(d=0;e>d;){for(i=a[d][e],f=0;f!==d;)i-=a[d][f]*a[f][e],++f;a[d][e]=i,++d}for(g=0,h=-1,d=e;b>d;){for(i=a[d][e],f=0;e>f;)i-=a[d][f]*a[f][e],++f;a[d][e]=i,k=Math.abs(i),k>=g&&(g=k,h=d),++d}if(e!==h){for(f=0;b>f;)k=a[h][f],a[h][f]=a[e][f],a[e][f]=k,++f;this.scaleFactors[h]=this.scaleFactors[e]}if(c[e]=h,0===a[e][e]&&(a[e][e]=1e-18),e!==b-1)for(j=1/a[e][e],d=e+1;d!==b;)a[d][e]*=j,++d;++e}return!0},a.prototype.luSolve=function(a,b,c,d){var e,f,g,h,i,j,k,l;for(f=0;b>f&&(h=c[f],i=d[h],d[h]=d[f],d[f]=i,0===i);)++f;for(e=f++;b>f;){for(h=c[f],j=d[h],d[h]=d[f],g=e;f>g;)j-=a[f][g]*d[g],++g;d[f]=j,++f}for(f=b-1,l=[];f>=0;){for(k=d[f],g=f+1;g!==b;)k-=a[f][g]*d[g],++g;d[f]=k/a[f][f],l.push(f--)}return l},a}(),b.exports=g}).call(this)},{"./matrixStamper.coffee":40,"./graphTraversal/pathfinder.coffee":41,"./graphTraversal/circuitNode.coffee":42,"./graphTraversal/circuitNodeLink.coffee":43,"./rowInfo.coffee":44,"../settings/settings.coffee":17,"../util/ArrayUtils.coffee":45,"../component/components/GroundElm.coffee":22,"../component/components/RailElm.coffee":31,"../component/components/VoltageElm.coffee":23,"../component/components/WireElm.coffee":20,"../component/components/CapacitorElm.coffee":27,"../component/components/InductorElm.coffee":28,"../component/components/CurrentElm.coffee":30}],15:[function(a,b){(function(){var c,d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}};i=a("../settings/settings.coffee"),e=a("../render/drawHelper.coffee"),h=a("../geom/rectangle.coffee"),g=a("../geom/point.coffee"),f=a("../util/mathUtils.coffee"),c=a("../util/arrayUtils.coffee"),d=function(){function a(a,b,c,d,e,g){this.x1=null!=a?a:100,this.y1=null!=b?b:100,this.x2=null!=c?c:100,this.y2=null!=d?d:200,null==e&&(e=0),null==g&&(g=[]),this.drawDots=j(this.drawDots,this),this.destroy=j(this.destroy,this),this.current=0,this.curcount=0,this.noDiagonal=!1,this.selected=!1,this.dragging=!1,this.parentCircuit=null,this.focused=!1,this.flags=e||this.getDefaultFlags(),this.setPoints(),this.allocNodes(),this.initBoundingBox(),this.component_id=f.getRand(1e8)+(new Date).getTime()}return a.prototype.getParentCircuit=function(){return this.Circuit},a.prototype.isBeingDragged=function(){return this.dragging},a.prototype.beingDragged=function(a){return this.dragging=a},a.prototype.allocNodes=function(){return this.nodes=c.zeroArray(this.getPostCount()+this.getInternalNodeCount()),this.volts=c.zeroArray(this.getPostCount()+this.getInternalNodeCount())},a.prototype.setPoints=function(){return this.dx=this.x2-this.x1,this.dy=this.y2-this.y1,this.dn=Math.sqrt(this.dx*this.dx+this.dy*this.dy),this.dpx1=this.dy/this.dn,this.dpy1=-this.dx/this.dn,this.dsign=f.sign(0===this.dy?this.dx:this.dy),this.point1=new g(this.x1,this.y1),this.point2=new g(this.x2,this.y2)},a.prototype.setPowerColor=function(){return console.warn("Set power color not yet implemented")},a.prototype.getDumpType=function(){return 0},a.prototype.reset=function(){return this.volts=c.zeroArray(this.volts.length),this.curcount=0},a.prototype.setCurrent=function(a,b){return this.current=b},a.prototype.getCurrent=function(){return this.current},a.prototype.getVoltageDiff=function(){return this.volts[0]-this.volts[1]},a.prototype.getPower=function(){return this.getVoltageDiff()*this.current},a.prototype.calculateCurrent=function(){},a.prototype.doStep=function(){},a.prototype.orphaned=function(){return null===this.Circuit||void 0===this.Circuit},a.prototype.destroy=function(){return this.Circuit.desolder(this)},a.prototype.startIteration=function(){},a.prototype.getPostVoltage=function(a){return this.volts[a]},a.prototype.setNodeVoltage=function(a,b){return this.volts[a]=b,this.calculateCurrent()},a.prototype.calcLeads=function(a){return this.dn<a||0===a?(this.lead1=this.point1,this.lead2=this.point2,void console.log("Len: "+a)):(this.lead1=e.interpPoint(this.point1,this.point2,(this.dn-a)/(2*this.dn)),this.lead2=e.interpPoint(this.point1,this.point2,(this.dn+a)/(2*this.dn)))},a.prototype.updateDotCount=function(a,b){var c;return(isNaN(a)||null==a)&&(a=this.current),(isNaN(b)||null==b)&&(b=this.curcount),c=a*this.Circuit.Params.getCurrentMult(),c%=8,this.curcount=b+c,this.curcount},a.prototype.getDefaultFlags=function(){return 0},a.prototype.equalTo=function(a){return this.component_id===a.component_id},a.prototype.drag=function(a,b){return a=this.Circuit.snapGrid(a),b=this.Circuit.snapGrid(b),this.noDiagonal&&(Math.abs(this.x1-a)<Math.abs(this.y1-b)?a=this.x1:b=this.y1),this.x2=a,this.y2=b,this.setPoints()},a.prototype.move=function(a,b){return this.x1+=a,this.y1+=b,this.x2+=a,this.y2+=b,this.boundingBox.x+=a,this.boundingBox.y+=b,this.setPoints()},a.prototype.allowMove=function(a,b){var c,d,e,f,g,h,i,j;for(d=this.x1+a,f=this.y1+b,e=this.x2+a,g=this.y2+b,j=this.Circuit.elementList,h=0,i=j.length;i>h;h++){if(c=j[h],c.x1===d&&c.y1===f&&c.x2===e&&c.y2===g)return!1;if(c.x1===e&&c.y1===g&&c.x2===d&&c.y2===f)return!1}return!0},a.prototype.movePoint=function(a,b,c){return 0===a?(this.x1+=b,this.y1+=c):(this.x2+=b,this.y2+=c),this.setPoints()},a.prototype.stamp=function(){throw"Called abstract function stamp() in Circuit "+this.getDumpType()},a.prototype.getDumpClass=function(){return this.toString()},a.prototype.toString=function(){return console.error("Virtual call on toString in circuitComponent was "+this.dump())},a.prototype.dump=function(){return this.getDumpType()+" "+this.x1+" "+this.y1+" "+this.x2+" "+this.y2+" "+this.flags},a.prototype.getVoltageSourceCount=function(){return 0},a.prototype.getInternalNodeCount=function(){return 0},a.prototype.setNode=function(a,b){return this.nodes[a]=b},a.prototype.setVoltageSource=function(a,b){return this.voltSource=b},a.prototype.getVoltageSource=function(){return this.voltSource},a.prototype.nonLinear=function(){return!1},a.prototype.getPostCount=function(){return 2},a.prototype.getNode=function(a){return this.nodes[a]},a.prototype.getPost=function(a){return 0===a?this.point1:1===a?this.point2:console.printStackTrace()},a.prototype.getBoundingBox=function(){return this.boundingBox},a.prototype.initBoundingBox=function(){return this.boundingBox=new h,this.boundingBox.x=Math.min(this.x1,this.x2),this.boundingBox.y=Math.min(this.y1,this.y2),this.boundingBox.width=Math.abs(this.x2-this.x1)+1,this.boundingBox.height=Math.abs(this.y2-this.y1)+1},a.prototype.setBbox=function(a,b,c,d){var e;return a>c&&(e=a,a=c,c=e),b>d&&(e=b,b=d,d=e),this.boundingBox.x=a,this.boundingBox.y=b,this.boundingBox.width=c-a+1,this.boundingBox.height=d-b+1},a.prototype.setBboxPt=function(a,b,c){var d,e;return this.setBbox(a.x,a.y,b.x,b.y),d=this.dpx1*c,e=this.dpy1*c,this.adjustBbox(a.x+d,a.y+e,a.x-d,a.y-e)},a.prototype.adjustBbox=function(a,b,c,d){var e;return a>c&&(e=a,a=c,c=e),b>d&&(e=b,b=d,d=e),a=Math.min(this.boundingBox.x,a),b=Math.min(this.boundingBox.y,b),c=Math.max(this.boundingBox.x+this.boundingBox.width-1,c),d=Math.max(this.boundingBox.y+this.boundingBox.height-1,d),this.boundingBox.x=a,this.boundingBox.y=b,this.boundingBox.width=c-a,this.boundingBox.height=d-b},a.prototype.adjustBboxPt=function(a,b){return this.adjustBbox(a.x,a.y,b.x,b.y)},a.prototype.isCenteredText=function(){return!1},a.prototype.getInfo=function(a){return a=new Array(15)},a.prototype.getEditInfo=function(){throw new Error("Called abstract function getEditInfo() in AbstractCircuitElement")},a.prototype.setEditValue=function(){throw new Error("Called abstract function setEditInfo() in AbstractCircuitElement")},a.prototype.getBasicInfo=function(a){return a[1]="I = "+e.getCurrentDText(this.getCurrent()),a[2]="Vd = "+e.getVoltageDText(this.getVoltageDiff()),3},a.prototype.getScopeValue=function(a){return 1===a?this.getPower():this.getVoltageDiff()},a.getScopeUnits=function(a){return 1===a?"W":"V"},a.prototype.getConnection=function(){return!0},a.prototype.hasGroundConnection=function(){return!1},a.prototype.isWire=function(){return!1},a.prototype.canViewInScope=function(){return this.getPostCount()<=2},a.prototype.needsHighlight=function(){return this.focused},a.prototype.setSelected=function(a){return this.selected=a},a.prototype.isSelected=function(){return this.selected},a.prototype.needsShortcut=function(){return!1},a.prototype.draw=function(a){return this.curcount=this.updateDotCount(),this.drawPosts(a),this.draw2Leads(a)},a.prototype.draw2Leads=function(a){return null!=this.point1&&null!=this.lead1&&a.drawThickLinePt(this.point1,this.lead1,e.getVoltageColor(this.volts[0])),null!=this.point2&&null!=this.lead2?a.drawThickLinePt(this.lead2,this.point2,e.getVoltageColor(this.volts[1])):void 0},a.prototype.drawDots=function(a,b,c){var d,e,f,g,h,j,k,l,m,n;if(null==a&&(a=this.point1),null==b&&(b=this.point2),(null!=(m=this.Circuit)?!m.isStopped():!0)&&0!==this.current){for(g=b.x-a.x,h=b.y-a.y,e=Math.sqrt(g*g+h*h),f=16,d=this.current*this.Circuit.currentSpeed(),this.curcount=(this.curcount+d)%f,this.curcount<0&&(this.curcount+=f),j=this.curcount,n=[];e>j;)k=a.x+j*g/e,l=a.y+j*h/e,c.fillCircle(k,l,i.CURRENT_RADIUS),n.push(j+=f);return n}},a.prototype.drawCenteredText=function(a,b,c,d,e){var f,g,h;return h=10*a.length,d&&(b-=h/2),f=-10,g=5,e.fillStyle=i.TEXT_COLOR,e.fillText(a,b,c+f),this.adjustBbox(b,c-f,b+h,c+f+g),a},a.prototype.drawValues=function(a,b,c){var d,e,f,g,h,j,k,l;if(a)return g=100,k=-10,h=(this.x2+this.x1)/2,l=(this.y2+this.y1)/2,d=Math.floor(this.dpx1*b),e=Math.floor(this.dpy1*b),f=20,c.fillStyle=i.TEXT_COLOR,0===d?c.fillText(a,h-g/2+3*f/2,l-Math.abs(e)-f/3):(j=h+Math.abs(d)+f,c.fillText(a,j,l+e+k))},a.prototype.drawPosts=function(a){var b,c,d,e,f;for(f=[],b=d=0,e=this.getPostCount();e>=0?e>d:d>e;b=e>=0?++d:--d)c=this.getPost(b),f.push(this.drawPost(c.x,c.y,this.nodes[b],a));return f},a.prototype.drawPost=function(a,b,c,d){var e,f;return this.needsHighlight()?(e=i.POST_COLOR_SELECTED,f=i.POST_COLOR_SELECTED):(e=i.POST_COLOR,f=i.POST_COLOR),d.fillCircle(a,b,i.POST_RADIUS,1,e,f)},a.newPointArray=function(a){var b;for(b=new Array(a);a>0;)b[--a]=new g(0,0);return b},a.prototype.comparePair=function(a,b,c,d){return this.Circuit.Params},a.prototype.timeStep=function(){return this.Circuit.timeStep()},b.exports=a,a}()}).call(this)},{"../settings/settings.coffee":17,"../render/drawHelper.coffee":46,"../geom/rectangle.coffee":18,"../geom/point.coffee":47,"../util/mathUtils.coffee":48,"../util/arrayUtils.coffee":49}],42:[function(a,b){(function(){var a;a=function(){function a(a,b,c,d){this.x=null!=a?a:0,this.y=null!=b?b:0,this.intern=null!=c?c:!1,this.links=null!=d?d:[]}return a.prototype.toString=function(){return"CircuitNode: "+this.x+" "+this.y+" "+this.intern+" ["+this.links.toString()+"]"},a}(),b.exports=a}).call(this)},{}],43:[function(a,b){(function(){var a;a=function(){function a(a,b){this.num=null!=a?a:0,this.elm=null!=b?b:null}return a.prototype.toString=function(){return""+this.num+" "+this.elm.toString()},a}(),b.exports=a}).call(this)},{}],44:[function(a,b){(function(){var a;a=function(){function a(){this.type=a.ROW_NORMAL,this.nodeEq=0,this.mapCol=0,this.mapRow=0,this.value=0,this.rsChanges=!1,this.lsChanges=!1,this.dropRow=!1}return a.ROW_NORMAL=0,a.ROW_CONST=1,a.ROW_EQUAL=2,a.prototype.toString=function(){return"RowInfo: type: "+this.type+", nodeEq: "+this.nodeEq+", mapCol: "+this.mapCol+", mapRow: "+this.mapRow+", value: "+this.value+", rsChanges: "+this.rsChanges+", lsChanges: "+this.lsChanges+", dropRow: "+this.dropRow},a}(),b.exports=a}).call(this)},{}],45:[function(a,b){(function(){var a;Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(null==b&&(b=0);b<this.length;){if(this[b]===a)return b;++b}return-1}),Array.prototype.remove=function(){var a,b,c,d;for(a=arguments,d=a.length;d&&this.length;)for(c=a[--d];-1!==(b=this.indexOf(c));)this.splice(b,1);return this},a=function(){function a(){}return a.zeroArray=function(a){var b;return 1>a?[]:function(){var c,d,e,f;for(e=Array(a),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(0);return f}()},a.zeroArray2=function(a,b){var c,d,e,f,g;if(1>a)return[];for(f=Array(a),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.zeroArray(b));return g},a.isCleanArray=function(a){var b,c,d,e;for(d=0,e=a.length;e>d;d++)if(b=a[d],b instanceof Array)c=arguments.callee(b);else if(!isFinite(b))return console.warn("Invalid number found: "+b),console.printStackTrace(),!1},a.printArray=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(console.log(b));return e},a}(),b.exports=a}).call(this)},{}],49:[function(a,b){(function(){var a;Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(null==b&&(b=0);b<this.length;){if(this[b]===a)return b;++b}return-1}),Array.prototype.remove=function(){var a,b,c,d;for(a=arguments,d=a.length;d&&this.length;)for(c=a[--d];-1!==(b=this.indexOf(c));)this.splice(b,1);return this},a=function(){function a(){}return a.zeroArray=function(a){var b;return 1>a?[]:function(){var c,d,e,f;for(e=Array(a),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(0);return f}()},a.zeroArray2=function(a,b){var c,d,e,f,g;if(1>a)return[];for(f=Array(a),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.zeroArray(b));return g},a.isCleanArray=function(a){var b,c,d,e;for(d=0,e=a.length;e>d;d++)if(b=a[d],b instanceof Array)c=arguments.callee(b);else if(!isFinite(b))return console.warn("Invalid number found: "+b),console.printStackTrace(),!1},a.printArray=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(console.log(b));return e},a}(),b.exports=a}).call(this)},{}],47:[function(a,b){(function(){var a;a=function(){function a(a,b){this.x=null!=a?a:0,this.y=null!=b?b:0}return a.prototype.equals=function(a){return this.x===a.x&&this.y===a.y},a.toArray=function(b){var c,d,e,f,g;for(f=Array(b),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(new a(0,0));return g},a.comparePair=function(a,b,c,d){return a===c&&b===d||a===d&&b===c},a.distanceSq=function(a,b,c,d){return c-=a,d-=b,c*c+d*d},a.prototype.toString=function(){return"[	"+this.x+", 	"+this.y+"]"},a}(),b.exports=a}).call(this)},{}],48:[function(a,b){(function(){var a;a=function(){function a(){}return a.isInfinite=function(a){return a>1e18||!isFinite(a)},a.sign=function(a){return 0>a?-1:0===a?0:1},a.getRand=function(a){return Math.floor(Math.random()*(a+1))},a}(),b.exports=a}).call(this)},{}],40:[function(a,b){(function(){var c,d,e;c=a("../util/mathUtils.coffee"),e=a("./rowInfo.coffee"),d=function(){function a(a){this.Circuit=a}return a.prototype.stampVCVS=function(a,b,c,d){var e;return(isNaN(d)||isNaN(c))&&console.log("NaN in stampVCVS"),e=this.Circuit.numNodes()+d,this.stampMatrix(e,a,c),this.stampMatrix(e,b,-c)},a.prototype.stampVoltageSource=function(a,b,c,d){var e;return e=this.Circuit.numNodes()+c,console.log("Stamp voltage source  "+a+" "+b+" "+c+" "+d),this.stampMatrix(e,a,-1),this.stampMatrix(e,b,1),this.stampRightSide(e,d),this.stampMatrix(a,e,1),this.stampMatrix(b,e,-1)},a.prototype.updateVoltageSource=function(a,b,c,d){var e;return e=this.Circuit.numNodes()+c,this.stampRightSide(e,d)},a.prototype.stampResistor=function(a,b,d){var e,f;return console.log("Stamp resistor: "+a+" "+b+" "+d),f=1/d,(isNaN(f)||c.isInfinite(f))&&(this.Circuit.halt("bad resistance"),e=0,e/=e),this.stampMatrix(a,a,f),this.stampMatrix(b,b,f),this.stampMatrix(a,b,-f),this.stampMatrix(b,a,-f)},a.prototype.stampConductance=function(a,b,d){return(isNaN(d)||c.isInfinite(d))&&this.Circuit.halt("bad conductance"),this.stampMatrix(a,a,d),this.stampMatrix(b,b,d),this.stampMatrix(a,b,-d),this.stampMatrix(b,a,-d)},a.prototype.stampVCCurrentSource=function(a,b,d,e,f){return(isNaN(gain)||c.isInfinite(gain))&&this.Circuit.halt("Invalid gain on voltage controlled current source"),this.stampMatrix(a,d,f),this.stampMatrix(b,e,f),this.stampMatrix(a,e,-f),this.stampMatrix(b,d,-f)},a.prototype.stampCurrentSource=function(a,b,c){return this.stampRightSide(a,-c),this.stampRightSide(b,c)},a.prototype.stampCCCS=function(a,b,d,e){var f;return(isNaN(e)||c.isInfinite(e))&&this.Circuit.halt("Invalid gain on current source"),f=this.Circuit.numNodes()+d,this.stampMatrix(a,f,e),this.stampMatrix(b,f,-e)},a.prototype.stampMatrix=function(a,b,d){var f;if((isNaN(d)||c.isInfinite(d))&&this.Circuit.halt("attempted to stamp Matrix with invalid value"),a>0&&b>0){if(this.Circuit.Solver.circuitNeedsMap){if(a=this.Circuit.Solver.circuitRowInfo[a-1].mapRow,f=this.Circuit.Solver.circuitRowInfo[b-1],f.type===e.ROW_CONST)return void(this.Circuit.Solver.circuitRightSide[a]-=d*f.value);b=f.mapCol}else a--,b--;return this.Circuit.Solver.circuitMatrix[a][b]+=d}},a.prototype.stampRightSide=function(a,b){if(isNaN(b)||null===b){if(a>0)return console.log("rschanges true "+(a-1)),this.Circuit.Solver.circuitRowInfo[a-1].rsChanges=!0}else if(a>0)return this.Circuit.Solver.circuitNeedsMap?a=this.Circuit.Solver.circuitRowInfo[a-1].mapRow:a--,this.Circuit.Solver.circuitRightSide[a]+=b},a.prototype.stampNonLinear=function(a){return(isNaN(a)||null===a)&&console.error("null/NaN in stampNonlinear"),a>0?this.Circuit.Solver.circuitRowInfo[a-1].lsChanges=!0:void 0},a}(),b.exports=d}).call(this)},{"../util/mathUtils.coffee":48,"./rowInfo.coffee":44}],20:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("../../settings/settings.coffee"),d=a("../../render/drawHelper.coffee"),f=a("../../geom/polygon.coffee"),g=a("../../geom/rectangle.coffee"),e=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),i=function(a){function b(a,c,d,e,f,g){b.__super__.constructor.call(this,a,c,d,e,f,g)}return k(b,a),b.prototype.toString=function(){return"WireElm"},b.FLAG_SHOWCURRENT=1,b.FLAG_SHOWVOLTAGE=2,b.prototype.draw=function(a){var b;return a.drawThickLinePt(this.point1,this.point2,d.getVoltageColor(this.volts[0])),this.setBboxPt(this.point1,this.point2,3),this.mustShowCurrent()?(b=d.getUnitText(Math.abs(this.getCurrent()),"A"),this.drawValues(b,4,a)):this.mustShowVoltage()&&(b=d.getUnitText(this.volts[0],"V")),this.drawValues(b,4,a),this.drawPosts(a),this.drawDots(this.point1,this.point2,a)},b.prototype.stamp=function(a){return console.log("\nStamping Wire Elm"),a.stampVoltageSource(this.nodes[0],this.nodes[1],this.voltSource,0)},b.prototype.mustShowCurrent=function(){return 0!==(this.flags&b.FLAG_SHOWCURRENT)},b.prototype.mustShowVoltage=function(){return 0!==(this.flags&b.FLAG_SHOWVOLTAGE)},b.prototype.getVoltageSourceCount=function(){return 1},b.prototype.getInfo=function(a){return b.__super__.getInfo.call(this),a[0]="Wire",a[1]="I = "+d.getCurrentDText(this.getCurrent()),a[2]="V = "+d.getVoltageText(this.volts[0])},b.prototype.getEditInfo=function(){},b.prototype.setEditValue=function(){},b.prototype.getDumpType=function(){return"w"},b.prototype.getPower=function(){return 0},b.prototype.getVoltageDiff=function(){return this.volts[0]},b.prototype.isWire=function(){return!0},b.prototype.needsShortcut=function(){return!0},b}(c),b.exports=i}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],21:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../../settings/settings.coffee"),d=a("../../render/drawHelper.coffee"),f=a("../../geom/polygon.coffee"),g=a("../../geom/rectangle.coffee"),e=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),h=function(a){function b(a,c,d,f,g,h){null==g&&(g=0),null==h&&(h=null),b.__super__.constructor.call(this,a,c,d,f,g,h),this.resistance=h&&h.length>0?parseFloat(h):500,this.ps3=new e(100,50),this.ps4=new e(100,150)
}return k(b,a),b.prototype.draw=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o;for(k=16,f=0,b=6,l=this.volts[0],m=this.volts[1],this.setBboxPt(this.point1,this.point2,b),this.draw2Leads(a),d.getPowerColor(this.getPower),j=1/k,c=o=0;k>=0?k>o:o>k;c=k>=0?++o:--o){switch(e=0,3&c){case 0:e=1;break;case 2:e=-1;break;default:e=0}n=l+(m-l)*c/k,g=d.interpPoint(this.lead1,this.lead2,c*j,b*f),h=d.interpPoint(this.lead1,this.lead2,(c+1)*j,b*e),a.drawThickLinePt(g,h,d.getVoltageColor(n)),f=e}return i=d.getUnitText(this.resistance,"ohm"),this.drawValues(i,b,a),this.drawDots(this.point1,this.point2,a),this.drawPosts(a)},b.prototype.dump=function(){return b.__super__.dump.call(this)+" "+this.resistance},b.prototype.getDumpType=function(){return"r"},b.prototype.getEditInfo=function(a){return 0===a?new EditInfo("Resistance (ohms):",this.resistance,0,0):null},b.prototype.setEditValue=function(a,b){return b.value>0?this.resistance=b.value:void 0},b.prototype.getInfo=function(a){return a[0]="resistor",this.getBasicInfo(a),a[3]="R = "+d.getUnitText(this.resistance,d.ohmString),a[4]="P = "+d.getUnitText(this.getPower(),"W"),a},b.prototype.needsShortcut=function(){return!0},b.prototype.calculateCurrent=function(){return this.current=(this.volts[0]-this.volts[1])/this.resistance},b.prototype.setPoints=function(){return b.__super__.setPoints.call(this),this.calcLeads(32),this.ps3=new e(0,0),this.ps4=new e(0,0)},b.prototype.stamp=function(a){return console.log("\nStamping Resistor Elm"),this.orphaned()&&console.warn("attempting to stamp an orphaned resistor"),a.stampResistor(this.nodes[0],this.nodes[1],this.resistance)},b.prototype.toString=function(){return"ResistorElm"},b}(c),b.exports=h}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],22:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../../settings/settings.coffee"),d=a("../../render/drawHelper.coffee"),g=a("../../geom/polygon.coffee"),h=a("../../geom/rectangle.coffee"),f=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),e=function(a){function b(a,c,d,e,f,g){b.__super__.constructor.call(this,a,c,d,e,f,g)}return k(b,a),b.prototype.getDumpType=function(){return"g"},b.prototype.getPostCount=function(){return 1},b.prototype.draw=function(a){var b,c,e,f,g,h,i,j;for(b=d.getVoltageColor(0),a.drawThickLinePt(this.point1,this.point2,b),g=i=0;3>i;g=++i)h=10-2*g,c=3*g,j=d.interpPoint2(this.point1,this.point2,1+c/this.dn,h),e=j[0],f=j[1],a.drawThickLinePt(e,f,b);return f=d.interpPoint(this.point1,this.point2,1+11/this.dn),this.setBboxPt(this.point1,f,11),this.drawPost(this.x1,this.y1,this.nodes[0],a),this.drawDots(this.point1,this.point2,a)},b.prototype.setCurrent=function(a,b){return this.current=-b},b.prototype.stamp=function(a){return console.log("\nStamping Ground Elm"),a.stampVoltageSource(0,this.nodes[0],this.voltSource,0)},b.prototype.getVoltageDiff=function(){return 0},b.prototype.getVoltageSourceCount=function(){return 1},b.prototype.getInfo=function(a){return b.__super__.getInfo.call(this),a[0]="ground",a[1]="I = "+d.getCurrentText(this.getCurrent())},b.prototype.hasGroundConnection=function(){return!0},b.prototype.needsShortcut=function(){return!0},b.prototype.toString=function(){return"GroundElm"},b}(c),b.exports=e}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],23:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("../../settings/settings.coffee"),d=a("../../render/drawHelper.coffee"),f=a("../../geom/polygon.coffee"),g=a("../../geom/rectangle.coffee"),e=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),i=function(a){function b(a,c,d,e,f,g){b.__super__.constructor.call(this,a,c,d,e,f,g),this.waveform=b.WF_DC,this.frequency=40,this.maxVoltage=5,this.freqTimeZero=0,this.bias=0,this.phaseShift=0,this.dutyCycle=.5,g&&("string"==typeof g&&(g=g.split(" ")),this.waveform=g[0]?Math.floor(parseInt(g[0])):b.WF_DC,this.frequency=g[1]?parseFloat(g[1]):40,this.maxVoltage=g[2]?parseFloat(g[2]):5,this.bias=g[3]?parseFloat(g[3]):0,this.phaseShift=g[4]?parseFloat(g[4]):0,this.dutyCycle=g[5]?parseFloat(g[5]):.5),this.flags&0!==b.FLAG_COS&&(this.flags&=~b.FLAG_COS,this.phaseShift=Math.PI/2),this.reset()}return k(b,a),b.FLAG_COS=2,b.WF_DC=0,b.WF_AC=1,b.WF_SQUARE=2,b.WF_TRIANGLE=3,b.WF_SAWTOOTH=4,b.WF_PULSE=5,b.WF_VAR=6,b.circleSize=17,b.prototype.getDumpType=function(){return"v"},b.prototype.dump=function(){return""+b.__super__.dump.call(this)+" "+this.waveform+" "+this.frequency+" "+this.maxVoltage+" "+this.bias+" "+this.phaseShift+" "+this.dutyCycle},b.prototype.reset=function(){return this.freqTimeZero=0,this.curcount=5},b.prototype.triangleFunc=function(a){return a<Math.PI?a*(2/Math.PI)-1:1-(a-Math.PI)*(2/Math.PI)},b.prototype.stamp=function(a){return console.log("\nStamping Voltage Elm"),this.waveform===b.WF_DC?a.stampVoltageSource(this.nodes[0],this.nodes[1],this.voltSource,this.getVoltage()):a.stampVoltageSource(this.nodes[0],this.nodes[1],this.voltSource)},b.prototype.doStep=function(a){return this.waveform!==b.WF_DC?a.updateVoltageSource(this.nodes[0],this.nodes[1],this.voltSource,this.getVoltage()):void 0},b.prototype.getVoltage=function(){var a;switch(a=2*Math.PI*(this.Circuit.time-this.freqTimeZero)*this.frequency+this.phaseShift,this.waveform){case b.WF_DC:return this.maxVoltage+this.bias;case b.WF_AC:return Math.sin(a)*this.maxVoltage+this.bias;case b.WF_SQUARE:return this.bias+(a%(2*Math.PI)>2*Math.PI*this.dutyCycle?-this.maxVoltage:this.maxVoltage);case b.WF_TRIANGLE:return this.bias+this.triangleFunc(a%(2*Math.PI))*this.maxVoltage;case b.WF_SAWTOOTH:return this.bias+a%(2*Math.PI)*(this.maxVoltage/Math.PI)-this.maxVoltage;case b.WF_PULSE:return a%(2*Math.PI)<1?this.maxVoltage+this.bias:this.bias;default:return 0}},b.prototype.setPoints=function(){return b.__super__.setPoints.call(this),this.calcLeads(this.waveform===b.WF_DC||this.waveform===b.WF_VAR?8:2*b.circleSize)},b.prototype.draw=function(a){var c,e,f,g,h;return this.setBbox(this.x1,this.y2,this.x2,this.y2),this.draw2Leads(a),this.isBeingDragged()||(this.waveform===b.WF_DC?this.drawDots(this.point1,this.point2,a):this.drawDots(this.point1,this.lead1,a)),this.waveform===b.WF_DC?(g=d.interpPoint2(this.lead1,this.lead2,0,10),e=g[0],f=g[1],a.drawThickLinePt(this.lead1,e,d.getVoltageColor(this.volts[0])),a.drawThickLinePt(e,f,d.getVoltageColor(this.volts[0])),this.setBboxPt(this.point1,this.point2,16),h=d.interpPoint2(this.lead1,this.lead2,1,16),e=h[0],f=h[1],a.drawThickLinePt(e,f,d.getVoltageColor(this.volts[1]))):(this.setBboxPt(this.point1,this.point2,b.circleSize),c=d.interpPoint(this.lead1,this.lead2,.5),this.drawWaveform(c,a)),this.drawPosts(a)},b.prototype.drawWaveform=function(a,c){var e,f,g,i,j,k,l,m,n,o,p;switch(e=this.needsHighlight()?h.FG_COLOR:void 0,l=a.x,o=a.y,c.fillCircle(l,o,b.circleSize,2,"#FFFFFF"),k=8,this.adjustBbox(l-b.circleSize,o-b.circleSize,l+b.circleSize,o+b.circleSize),m=void 0,this.waveform){case b.WF_DC:break;case b.WF_SQUARE:m=Math.floor(2*k*this.dutyCycle-k+l),m=Math.max(l-k+3,Math.min(l+k-3,m)),c.drawThickLine(l-k,o-k,l-k,o,e),c.drawThickLine(l-k,o-k,m,o-k,e),c.drawThickLine(m,o-k,m,o+k,e),c.drawThickLine(l+k,o+k,m,o+k,e),c.drawThickLine(l+k,o,l+k,o+k,e);break;case b.WF_PULSE:o+=k/2,c.drawThickLine(l-k,o-k,l-k,o,e),c.drawThickLine(l-k,o-k,l-k/2,o-k,e),c.drawThickLine(l-k/2,o-k,l-k/2,o,e),c.drawThickLine(l-k/2,o,l+k,o,e);break;case b.WF_SAWTOOTH:c.drawThickLine(l,o-k,l-k,o,e),c.drawThickLine(l,o-k,l,o+k,e),c.drawThickLine(l,o+k,l+k,o,e);break;case b.WF_TRIANGLE:n=5,c.drawThickLine(l-2*n,o,l-n,o-k,e),c.drawThickLine(l-n,o-k,l,o,e),c.drawThickLine(l,o,l+n,o+k,e),c.drawThickLine(l+n,o+k,l+2*n,o,e);break;case b.WF_AC:for(n=10,g=-1,i=-1,f=-n;n>=f;)p=o+Math.floor(.95*Math.sin(f*Math.PI/n)*k),-1!==g&&c.drawThickLine(g,i,l+f,p,e),g=l+f,i=p,f++}return h.SHOW_VALUES&&(j=d.getShortUnitText(this.frequency,"Hz"),0===this.dx||0===this.dy)?this.drawValues(j,b.circleSize):void 0},b.prototype.getVoltageSourceCount=function(){return 1},b.prototype.getPower=function(){return-this.getVoltageDiff()*this.current},b.prototype.getVoltageDiff=function(){return this.volts[1]-this.volts[0]},b.prototype.getInfo=function(a){var c;switch(this.waveform){case b.WF_DC:case b.WF_VAR:a[0]="voltage source";break;case b.WF_AC:a[0]="A/C source";break;case b.WF_SQUARE:a[0]="square wave gen";break;case b.WF_PULSE:a[0]="pulse gen";break;case b.WF_SAWTOOTH:a[0]="sawtooth gen";break;case b.WF_TRIANGLE:a[0]="triangle gen"}return a[1]="I = "+d.getCurrentText(this.getCurrent()),this.waveform!==b.WF_DC&&this.waveform!==b.WF_VAR?(a[3]="f = "+d.getUnitText(this.frequency,"Hz"),a[4]="Vmax = "+d.getVoltageText(this.maxVoltage),c=5,0!==this.bias?a[c++]="Voff = "+this.getVoltageText(this.bias):this.frequency>500&&(a[c++]="wavelength = "+d.getUnitText(29979e4/this.frequency,"m")),a[c++]="P = "+d.getUnitText(this.getPower(),"W")):void 0},b.prototype.getEditInfo=function(a){var c;return 0===a?new EditInfo(this.waveform===b.WF_DC?"Voltage":"Max Voltage",this.maxVoltage,-20,20):1===a?(c=new EditInfo("Waveform",this.waveform,-1,-1),c.choice=new Array,c.choice.push("D/C"),c.choice.push("A/C"),c.choice.push("Square Wave"),c.choice.push("Triangle"),c.choice.push("Sawtooth"),c.choice.push("Pulse"),c.choice.push(this.waveform),c):void 0},b.prototype.setEditValue=function(a,c){var d,e,f,g,h,i;return 0===a&&(this.maxVoltage=c.value),3===a&&(this.bias=c.value),2===a&&(f=this.frequency,this.frequency=c.value,e=1/(8*simParams),this.frequency>e&&(this.frequency=e),d=this.frequency-f,this.freqTimeZero=(null!=(h=this.Circuit)?h.time:void 0)-f*((null!=(i=this.Circuit)?i.time:void 0)-this.freqTimeZero)/this.frequency),1===a&&(g=this.waveform,this.waveform===b.WF_DC&&g!==b.WF_DC?this.bias=0:this.waveform!==b.WF_DC&&g===b.WF_DC,this.waveform!==b.WF_SQUARE&&g!==b.WF_SQUARE||this.waveform===g||this.setPoints()),4===a&&(this.phaseShift=c.value*Math.PI/180),5===a?this.dutyCycle=.01*c.value:void 0},b.prototype.toString=function(){return"VoltageElm"},b}(c),b.exports=i}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],24:[function(a,b){(function(){var b,c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};return h=a("../../settings/settings.coffee"),d=a("../../render/drawHelper.coffee"),f=a("../../geom/polygon.coffee"),g=a("../../geom/rectangle.coffee"),e=a("../../geom/point.coffee"),b=a("../circuitComponent.coffee"),c=function(a){function c(a,b,d,e,f,g){if(c.__super__.constructor.call(this,a,b,d,e,f,g),this.hs=8,this.poly,this.cathode=[],this.diode=new Diode(self),this.fwdrop=c.DEFAULT_DROP,this.zvoltage=0,(f&c.FLAG_FWDROP)>0)try{this.fwdrop=parseFloat(g)}catch(h){}this.setup()}return j(c,a),c.FLAG_FWDROP=1,c.DEFAULT_DROP=.805904783,c.prototype.nonLinear=function(){return!0},c.prototype.setup=function(){return this.diode.setup(this.fwdrop,this.zvoltage)},c.prototype.getDumpType=function(){return"d"},c.prototype.dump=function(){return this.flags|=c.FLAG_FWDROP,b.prototype.dump.call(this)+" "+this.fwdrop},c.prototype.setPoints=function(){var a,e,f,g;return c.__super__.setPoints.call(this),this.calcLeads(16),this.cathode=b.newPointArray(2),f=d.interpPoint2(this.lead1,this.lead2,0,this.hs),a=f[0],e=f[1],g=d.interpPoint2(this.lead1,this.lead2,1,this.hs),this.cathode[0]=g[0],this.cathode[1]=g[1],this.poly=d.createPolygonFromArray([a,e,this.lead2])},c.prototype.draw=function(a){return this.drawDiode(a),this.drawDots(this.point1,this.point2,a),this.drawPosts(a)},c.prototype.reset=function(){return this.diode.reset(),this.volts[0]=this.volts[1]=this.curcount=0},c.prototype.drawDiode=function(a){var b,c,e;return this.setBboxPt(this.point1,this.point2,this.hs),c=this.volts[0],e=this.volts[1],this.draw2Leads(a),b=d.getVoltageColor(c),a.drawThickPolygonP(this.poly,b),b=d.getVoltageColor(e),a.drawThickLinePt(this.cathode[0],this.cathode[1],b)},c.prototype.stamp=function(a){return this.diode.stamp(this.nodes[0],this.nodes[1],a)},c.prototype.doStep=function(a){return this.diode.doStep(this.volts[0]-this.volts[1],a)},c.prototype.calculateCurrent=function(){return this.current=this.diode.calculateCurrent(this.volts[0]-this.volts[1])},c.prototype.getInfo=function(a){return c.__super__.getInfo.call(this),a[0]="diode",a[1]="I = "+d.getCurrentText(this.getCurrent()),a[2]="Vd = "+d.getVoltageText(this.getVoltageDiff()),a[3]="P = "+d.getUnitText(this.getPower(),"W"),a[4]="Vf = "+d.getVoltageText(this.fwdrop)},c.prototype.getEditInfo=function(a){return 0===a?new EditInfo("Fwd Voltage @ 1A",this.fwdrop,10,1e3):void 0},c.prototype.setEditValue=function(a,b){return this.fwdrop=b.value,this.setup()},c.prototype.toString=function(){return"DiodeElm"},c.prototype.needsShortcut=function(){return!0},c}(b)}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],25:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../../settings/settings.coffee"),d=a("../../render/drawHelper.coffee"),g=a("../../geom/polygon.coffee"),h=a("../../geom/rectangle.coffee"),f=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),e=function(a){function b(a,c,d,e,f){b.__super__.constructor.call(this,a,c,d,e,f)}return k(b,a),b.FLAG_VALUE=1,b.prototype.getDumpType=function(){return"O"},b.prototype.getPostCount=function(){return 1},b.prototype.setPoints=function(){return b.__super__.setPoints.call(this),this.lead1=new f},b.prototype.draw=function(a){var c,e,f;return f=this.needsHighlight(),c=f?i.SELECT_COLOR:"#FFF",e=0!==(this.flags&b.FLAG_VALUE)?d.getVoltageText(this.volts[0]):"out",this.lead1=d.interpPoint(this.point1,this.point2,1-(3*e.length/2+8)/this.dn),this.setBboxPt(this.point1,this.lead1,0),this.drawCenteredText(e,this.x2,this.y2,!0,a),c=f?d.getVoltageColor(this.volts[0]):i.SELECT_COLOR,a.drawThickLinePt(this.point1,this.lead1,c),this.drawPosts(a)},b.prototype.getVoltageDiff=function(){return this.volts[0]},b.prototype.getInfo=function(a){return a[0]="output",a[1]="V = "+d.getVoltageText(this.volts[0])},b.prototype.getEditInfo=function(a){var b;return 0===a?(b=new EditInfo("",0,-1,-1),b.checkbox="Show Voltage",b):null},b.prototype.stamp=function(){},b.prototype.toString=function(){return"OutputElm"},b.prototype.setEditValue=function(){},b}(c),b.exports=e}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],26:[function(a){(function(){var b,c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};return g=a("../../settings/settings.coffee"),c=a("../../render/drawHelper.coffee"),e=a("../../geom/polygon.coffee"),f=a("../../geom/rectangle.coffee"),d=a("../../geom/point.coffee"),b=a("../circuitComponent.coffee"),h=function(a){function b(a,c,e,f,g,h){var i;b.__super__.constructor.call(this,a,c,e,f,g,h),this.momentary=!1,this.position=0,this.posCount=2,this.ps=new d(0,0),this.ps2=new d(0,0),h&&("string"==typeof h&&(h=h.split(" ")),i=h.shift(),this.position=0)}return j(b,a),b.prototype.getDumpType=function(){return"s"},b.prototype.dump=function(){return""+b.__super__.dump.call(this)+" "+this.position+" "+this.momentary},b.prototype.setPoints=function(){return b.__super__.setPoints.call(this),this.calcLeads(32),this.ps=new d(0,0),this.ps2=new d(0,0)},b.prototype.stamp=function(a){return console.log(this.voltSource),0===this.position?a.stampVoltageSource(this.nodes[0],this.nodes[1],this.voltSource,0):void 0},b.prototype.draw=function(a){var b,d,e;return e=16,b=1===this.position?0:2,d=1===this.position?e:2,this.setBboxPt(this.point1,this.point2,e),this.draw2Leads(a),0===this.position&&this.drawDots(a),this.ps=c.interpPoint(this.lead1,this.lead2,0,b),this.ps2=c.interpPoint(this.lead1,this.lead2,1,d),a.drawThickLinePt(this.ps,this.ps2,g.FG_COLOR),this.drawPosts(a)},b.prototype.calculateCurrent=function(){return 1===this.position?this.current=0:void 0},b.prototype.getVoltageSourceCount=function(){return 1===this.position?0:1},b.prototype.mouseUp=function(){return this.momentary?this.toggle():void 0},b.prototype.toggle=function(){return this.position++,this.position>=this.posCount&&(this.position=0),this.Circuit.Solver.analyzeFlag=!0},b.prototype.getInfo=function(a){return a[0]=this.momentary?"push switch (SPST)":"switch (SPST)",1===this.position?(a[1]="open",a[2]="Vd = "+c.getVoltageDText(this.getVoltageDiff())):(a[1]="closed",a[2]="V = "+c.getVoltageText(this.volts[0]),a[3]="I = "+c.getCurrentDText(this.getCurrent()))},b.prototype.getConnection=function(){return 0===this.position},b.prototype.isWire=function(){return!0},b.prototype.getEditInfo=function(){},b.prototype.setEditValue=function(a){return 0===a},b.prototype.toString=function(){return"SwitchElm"},b}(b)}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],27:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../../settings/settings.coffee"),e=a("../../render/drawHelper.coffee"),g=a("../../geom/polygon.coffee"),h=a("../../geom/rectangle.coffee"),f=a("../../geom/point.coffee"),d=a("../circuitComponent.coffee"),c=function(a){function b(a,c,d,e,f,g){b.__super__.constructor.call(this,a,c,d,e,f,g),this.capacitance=5e-6,this.compResistance=11,this.voltDiff=10,this.plate1=[],this.plate2=[],this.curSourceValue=0,g&&("string"==typeof g&&(g=g.split(" ")),this.capacitance=Number(g[0]),this.voltDiff=Number(g[1]))}return k(b,a),b.FLAG_BACK_EULER=2,b.prototype.isTrapezoidal=function(){return 0===(this.flags&b.FLAG_BACK_EULER)},b.prototype.nonLinear=function(){return!1},b.prototype.setNodeVoltage=function(a,c){return b.__super__.setNodeVoltage.call(this,a,c),this.voltDiff=this.volts[0]-this.volts[1]},b.prototype.reset=function(){return this.current=this.curcount=0,this.voltDiff=.001},b.prototype.getDumpType=function(){return"c"},b.prototype.dump=function(){return""+b.__super__.dump.apply(this,arguments)+" "+this.capacitance+" "+this.voltDiff},b.prototype.setPoints=function(){var a,c,d;return b.__super__.setPoints.call(this),a=(this.dn/2-4)/this.dn,this.lead1=e.interpPoint(this.point1,this.point2,a),this.lead2=e.interpPoint(this.point1,this.point2,1-a),this.plate1=[new f,new f],this.plate2=[new f,new f],c=e.interpPoint2(this.point1,this.point2,a,12),this.plate1[0]=c[0],this.plate1[1]=c[1],d=e.interpPoint2(this.point1,this.point2,1-a,12),this.plate2[0]=d[0],this.plate2[1]=d[1],d},b.prototype.draw=function(a){var b,c;return c=12,this.setBboxPt(this.point1,this.point2,c),b=e.getVoltageColor(this.volts[0]),a.drawThickLinePt(this.point1,this.lead1,b),a.drawThickLinePt(this.plate1[0],this.plate1[1],b),b=e.getVoltageColor(this.volts[1]),a.drawThickLinePt(this.point2,this.lead2,b),a.drawThickLinePt(this.plate2[0],this.plate2[1],b),this.drawDots(this.point1,this.lead1,a),this.drawDots(this.lead2,this.point2,a),this.drawPosts(a)},b.prototype.drawUnits=function(){var a;return a=e.getUnitText(this.capacitance,"F"),this.drawValues(a,hs)},b.prototype.doStep=function(a){return a.stampCurrentSource(this.nodes[0],this.nodes[1],this.curSourceValue)},b.prototype.stamp=function(a){this.compResistance=this.isTrapezoidal()?this.timeStep()/(2*this.capacitance):this.timeStep()/this.capacitance,a.stampResistor(this.nodes[0],this.nodes[1],this.compResistance),a.stampRightSide(this.nodes[0]),a.stampRightSide(this.nodes[1])},b.prototype.startIteration=function(){this.curSourceValue=this.isTrapezoidal()?-this.voltDiff/this.compResistance-this.current:-this.voltDiff/this.compResistance},b.prototype.calculateCurrent=function(){var a;return a=this.volts[0]-this.volts[1],this.compResistance>0?this.current=a/this.compResistance+this.curSourceValue:void 0},b.prototype.getInfo=function(a){var c;return b.__super__.getInfo.call(this),a[0]="capacitor",this.getBasicInfo(a),a[3]="C = "+e.getUnitText(this.capacitance,"F"),a[4]="P = "+e.getUnitText(this.getPower(),"W"),c=this.getVoltageDiff(),a[4]="U = "+e.getUnitText(.5*this.capacitance*c*c,"J")},b.prototype.getEditInfo=function(a){var b;return 0===a?new EditInfo("Capacitance (F)",this.capacitance,0,0):1===a?(b=new EditInfo("",0,-1,-1),b.checkbox="Trapezoidal Approximation",b):null},b.prototype.setEditValue=function(a,c){return 0===a&&c.value>0&&(this.capacitance=c.value),1===a?c.isChecked?this.flags&=~b.FLAG_BACK_EULER:this.flags|=b.FLAG_BACK_EULER:void 0},b.prototype.needsShortcut=function(){return!0},b.prototype.toString=function(){return"CapacitorElm"},b}(d),b.exports=c}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],28:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../../settings/settings.coffee"),d=a("../../render/drawHelper.coffee"),g=a("../../geom/polygon.coffee"),h=a("../../geom/rectangle.coffee"),f=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),e=function(a){function b(a,c,d,e,f,g){b.__super__.constructor.call(this,a,c,d,e,f),this.inductance=0,this.nodes=new Array(2),this.flags=0,this.compResistance=0,this.current=0,this.curSourceValue=0,g&&("string"==typeof g&&(g=g.split(" ")),this.inductance=parseFloat(g[0]),this.current=parseFloat(g[1]))}return k(b,a),b.FLAG_BACK_EULER=2,b.prototype.stamp=function(a){var b;return b=this.getParentCircuit().timeStep(),console.log(b),console.log(this.inductance),this.compResistance=this.isTrapezoidal()?2*this.inductance/b:this.inductance/b,a.stampResistor(this.nodes[0],this.nodes[1],this.compResistance),a.stampRightSide(this.nodes[0]),a.stampRightSide(this.nodes[1])},b.prototype.doStep=function(a){return a.stampCurrentSource(this.nodes[0],this.nodes[1],this.curSourceValue)},b.prototype.draw=function(a){var b,c,e,f;return e=this.volts[0],f=this.volts[1],b=8,this.setBboxPt(this.point1,this.point2,b),this.draw2Leads(a),d.drawCoil(8,this.lead1,this.lead2,e,f,a),c=d.getUnitText(this.inductance,"H"),this.drawValues(c,b,a),this.drawPosts(a),this.drawDots(this.point1,this.point2,a)},b.prototype.dump=function(){return""+b.__super__.dump.call(this)+" "+this.inductance+" "+this.current},b.prototype.getDumpType=function(){return"l"},b.prototype.startIteration=function(){return this.curSourceValue=this.isTrapezoidal()?this.getVoltageDiff()/this.compResistance+this.current:this.current},b.prototype.nonLinear=function(){return!1},b.prototype.isTrapezoidal=function(){return 0===(this.flags&b.FLAG_BACK_EULER)},b.prototype.calculateCurrent=function(){return this.compResistance>0&&(this.current=this.getVoltageDiff()/this.compResistance+this.curSourceValue),this.current},b.prototype.getInfo=function(a){return a[0]="inductor",this.getBasicInfo(a),a[3]="L = "+d.getUnitText(this.inductance,"H"),a[4]="P = "+d.getUnitText(this.getPower(),"W")},b.prototype.reset=function(){return this.current=0,this.volts[0]=0,this.volts[1]=0,this.curcount=0},b.prototype.getVoltageDiff=function(){return this.volts[0]-this.volts[1]},b.prototype.toString=function(){return"InductorElm"},b.prototype.getEditInfo=function(a){var b;return 0===a?new EditInfo("Inductance (H)",this.inductance,0,0):1===a?(b=new EditInfo("",0,-1,-1),b.checkbox="Trapezoidal Approximation",b):null},b.prototype.setEditValue=function(a,b){return 0===a&&(this.inductance=b.value),1===a?b.checkbox.getState()?this.flags&=~Inductor.FLAG_BACK_EULER:this.flags|=Inductor.FLAG_BACK_EULER:void 0},b.prototype.setPoints=function(){return b.__super__.setPoints.call(this),this.calcLeads(32)},b}(c),b.exports=e}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],29:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("../../settings/settings.coffee"),d=a("../../render/drawHelper.coffee"),f=a("../../geom/polygon.coffee"),g=a("../../geom/rectangle.coffee"),e=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),i=function(a){function b(a,c,d,e,f,g){b.__super__.constructor.call(this,a,c,d,e,f),this.resistance=0,this.offresistance=1e9,this.onresistance=1e3,this.breakdown=1e3,this.holdcurrent=.001,this.state=!1,g&&("string"==typeof g&&(g=g.split(" ")),g&&(this.onresistance=parseFloat(null!=g?g.shift():void 0)),g&&(this.offresistance=parseFloat(null!=g?g.shift():void 0)),g&&(this.breakdown=parseFloat(null!=g?g.shift():void 0)),g&&(this.holdcurrent=parseFloat(null!=g?g.shift():void 0)))}return k(b,a),b.prototype.nonLinear=function(){return!0},b.prototype.getDumpType=function(){return 187},b.prototype.dump=function(){return""+b.__super__.dump.call(this)+" "+this.onresistance+" "+this.offresistance+" "+this.breakdown+" "+this.holdcurrent},b.prototype.setPoints=function(){var a,c;return b.__super__.setPoints.call(this),c=16,a=8,this.calcLeads(c+a)},b.prototype.calculateCurrent=function(){return this.current=(this.volts[0]-this.volts[1])/this.resistance},b.prototype.reset=function(){return b.__super__.reset.call(this),this.state=!1},b.prototype.startIteration=function(){var a;return Math.abs(this.current)<this.holdcurrent&&(this.state=!1),a=this.volts[0]-this.volts[1],Math.abs(a)>this.breakdown?this.state=!0:void 0},b.prototype.doStep=function(a){return this.state?(console.log("SPARK!"),this.resistance=this.onresistance):this.resistance=this.offresistance,a.stampResistor(this.nodes[0],this.nodes[1],this.resistance)},b.prototype.toString=function(){return"SparkGapElm"},b.prototype.stamp=function(a){return a.stampNonLinear(this.nodes[0]),a.stampNonLinear(this.nodes[1])},b.prototype.getInfo=function(a){return a[0]="spark gap",this.getBasicInfo(a),a[3]=this.state?"on":"off",a[4]="Ron = "+d.getUnitText(this.onresistance,Circuit.ohmString),a[5]="Roff = "+d.getUnitText(this.offresistance,Circuit.ohmString),a[6]="Vbreakdown = "+d.getUnitText(this.breakdown,"V")},b.prototype.needsShortcut=function(){return!1},b}(c),b.exports=i}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],46:[function(a,b){(function(){var c,d,e,f,g;g=a("../settings/settings.coffee"),e=a("../geom/polygon.coffee"),f=a("../geom/rectangle.coffee"),d=a("../geom/point.coffee"),c=function(){function a(){}var b;return a.ps1=new d(0,0),a.ps2=new d(0,0),a.colorScaleCount=32,a.colorScale=[],a.muString="u",a.ohmString="ohm",b=.48,a.initializeColorScale=function(){var a,b,c,d,e,f,g;for(this.colorScale=new Array(this.colorScaleCount),g=[],a=e=0,f=this.colorScaleCount;f>=0?f>e:e>f;a=f>=0?++e:--e)d=2*a/this.colorScaleCount-1,0>d?(b=Math.floor(128*-d+127),c=Math.floor(127*(1+d)),g.push(this.colorScale[a]=new Color(b,c,c))):(b=Math.floor(128*d+127),c=Math.floor(127*(1-d)),g.push(this.colorScale[a]=new Color(c,b,c)));return g},a.scale=["#ff0000","#f70707","#ef0f0f","#e71717","#df1f1f","#d72727","#cf2f2f","#c73737","#bf3f3f","#b74747","#af4f4f","#a75757","#9f5f5f","#976767","#8f6f6f","#877777","#7f7f7f","#778777","#6f8f6f","#679767","#5f9f5f","#57a757","#4faf4f","#47b747","#3fbf3f","#37c737","#2fcf2f","#27d727","#1fdf1f","#17e717","#0fef0f","#07f707","#00ff00"],a.unitsFont="Arial, Helvetica, sans-serif",a.interpPoint=function(a,c,e,f){var g,h,i;return null==f&&(f=0),g=c.y-a.y,h=a.x-c.x,f/=Math.sqrt(g*g+h*h),i=new d,i.x=Math.floor((1-e)*a.x+e*c.x+f*g+b),i.y=Math.floor((1-e)*a.y+e*c.y+f*h+b),i},a.interpPoint2=function(a,c,e,f){var g,h,i,j;return g=c.y-a.y,h=a.x-c.x,f/=Math.sqrt(g*g+h*h),i=new d,j=new d,i.x=Math.floor((1-e)*a.x+e*c.x+f*g+b),i.y=Math.floor((1-e)*a.y+e*c.y+f*h+b),j.x=Math.floor((1-e)*a.x+e*c.x-f*g+b),j.y=Math.floor((1-e)*a.y+e*c.y-f*h+b),[i,j]},a.calcArrow=function(a,b,c,d){var f,g,h,i,j,k,l;return k=new e,g=b.x-a.x,h=b.y-a.y,f=Math.sqrt(g*g+h*h),k.addVertex(b.x,b.y),l=this.interpPoint2(a,b,1-c/f,d),i=l[0],j=l[1],k.addVertex(i.x,i.y),k.addVertex(j.x,j.y),k},a.createPolygon=function(a,b,c,d){var f;return f=new e,f.addVertex(a.x,a.y),f.addVertex(b.x,b.y),f.addVertex(c.x,c.y),d&&f.addVertex(d.x,d.y),f},a.createPolygonFromArray=function(a){var b,c,d,f;for(b=new e,d=0,f=a.length;f>d;d++)c=a[d],b.addVertex(c.x,c.y);return b},a.drawCoil=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n;for(k=40,this.ps1.x=b.x,this.ps1.y=b.y,n=[],j=m=0;k>=0?k>m:m>k;j=k>=0?++m:--m)h=8*(j+1)/k%2-1,i=Math.sqrt(1-h*h),this.ps2=this.interpPoint(b,c,j/k,i*a),l=d+(e-d)*j/k,g=this.getVoltageColor(l),f.drawThickLinePt(this.ps1,this.ps2,g),this.ps1.x=this.ps2.x,n.push(this.ps1.y=this.ps2.y);return n},a.getShortUnitText=function(a,b){return this.getUnitText(a,b,1)},a.getUnitText=function(a,b,c){var d;return null==c&&(c=2),d=Math.abs(a),1e-18>d?"0 "+b:1e-12>d?(1e15*a).toFixed(c)+" f"+b:1e-9>d?(1e12*a).toFixed(c)+" p"+b:1e-6>d?(1e9*a).toFixed(c)+" n"+b:.001>d?(1e6*a).toFixed(c)+" "+this.muString+b:1>d?(1e3*a).toFixed(c)+" m"+b:1e3>d?a.toFixed(c)+" "+b:1e6>d?(.001*a).toFixed(c)+" k"+b:1e9>d?(1e-6*a).toFixed(c)+" M"+b:(1e-9*a).toFixed(c)+" G"+b},a.getVoltageDText=function(a){return this.getUnitText(Math.abs(a),"V")},a.getVoltageText=function(a){return this.getUnitText(a,"V")},a.getCurrentText=function(a){return this.getUnitText(a,"A")},a.getCurrentDText=function(a){return this.getUnitText(Math.abs(a),"A")},a.getVoltageColor=function(a,b){var c;return null==b&&(b=10),c=Math.floor((a+b)*(this.colorScaleCount-1)/(2*b)),0>c?c=0:c>=this.colorScaleCount&&(c=this.colorScaleCount-1),this.scale[c]},a.getPowerColor=function(a,b){var c,d,e;return null==b&&(b=1),g.powerCheckItem?(d=a*b,a=Math.abs(d),a>1&&(a=1),e=128+Math.floor(127*a),c=Math.floor(128*(1-a))):void 0},a}(),b.exports=c}).call(this)},{"../settings/settings.coffee":17,"../geom/polygon.coffee":50,"../geom/rectangle.coffee":18,"../geom/point.coffee":47}],30:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../../settings/settings.coffee"),e=a("../../render/drawHelper.coffee"),g=a("../../geom/polygon.coffee"),h=a("../../geom/rectangle.coffee"),f=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),d=function(a){function b(a,c,d,e,f,g){var h;
b.__super__.constructor.call(this,a,c,d,e,f);try{"string"==typeof g&&(g=g.split(" ")),this.currentValue||(this.currentValue=parseFloat(g[0]))}catch(i){h=i,this.currentValue=.01}}return k(b,a),b.prototype.dump=function(){return b.__super__.dump.call(this)+" "+this.currentValue},b.prototype.getDumpType=function(){return"i"},b.prototype.setPoints=function(){var a;return b.__super__.setPoints.call(this),this.calcLeads(26),this.ashaft1=e.interpPoint(this.lead1,this.lead2,.25),this.ashaft2=e.interpPoint(this.lead1,this.lead2,.6),this.center=e.interpPoint(this.lead1,this.lead2,.5),a=e.interpPoint(this.lead1,this.lead2,.75),this.arrow=e.calcArrow(this.center,a,4,4)},b.prototype.draw=function(a){var b,c;return c=12,this.draw2Leads(a),b=e.getVoltageColor((this.volts[0]+this.volts[1])/2),a.drawCircle(this.center.x,this.center.y,c),a.drawCircle(this.ashaft1,this.ashaft2),a.fillPolygon(this.arrow),a.setBboxPt(this.point1,this.point2,c),this.drawPosts(a),this.doDots(a)},b.prototype.stamp=function(a){return this.current=this.currentValue,a.stampCurrentSource(this.nodes[0],this.nodes[1],this.current)},b.prototype.getInfo=function(a){return b.__super__.getInfo.call(this),a[0]="current source",this.getBasicInfo(a)},b.prototype.getVoltageDiff=function(){return this.volts[1]-this.volts[0]},b}(c),b.exports=d}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],31:[function(a,b){(function(){var c,d,e,f,g,h,i,j,k,l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};j=a("../../settings/settings.coffee"),e=a("../../render/drawHelper.coffee"),g=a("../../geom/polygon.coffee"),i=a("../../geom/rectangle.coffee"),f=a("../../geom/point.coffee"),d=a("../circuitComponent.coffee"),k=a("./VoltageElm.coffee"),c=a("./AntennaElm.coffee"),h=function(a){function b(a,c,d,e,f,g){b.__super__.constructor.call(this,a,c,d,e,f,g)}return m(b,a),b.FLAG_CLOCK=1,b.prototype.getDumpType=function(){return"R"},b.prototype.getPostCount=function(){return 1},b.prototype.setPoints=function(){return b.__super__.setPoints.call(this),this.lead1=e.interpPoint(this.point1,this.point2,1-k.circleSize/this.dn)},b.prototype.draw=function(a){var b,d,f,g;return this.setBboxPt(this.point1,this.point2,this.circleSize),d=e.getVoltageColor(this.volts[0]),a.drawThickLinePt(this.point1,this.lead1,d),b=this.waveform===k.WF_SQUARE&&0!==(this.flags&k.FLAG_CLOCK),this.waveform===k.WF_DC||this.waveform===k.WF_VAR||b?(d=this.needsHighlight()?j.SELECT_COLOR:"#FFFFFF",g=this.getVoltage(),f=e.getShortUnitText(g,"V"),Math.abs(g)<1&&(f=g+"V"),this.getVoltage()>0&&(f="+"+f),this instanceof c&&(f="Ant"),b&&(f="CLK"),this.drawCenteredText(f,this.x2,this.y2,!0,a)):this.drawWaveform(this.point2,a),this.drawPosts(a),this.drawDots(this.point1,this.lead1,a)},b.prototype.getVoltageDiff=function(){return this.volts[0]},b.prototype.stamp=function(a){return this.waveform===k.WF_DC?a.stampVoltageSource(0,this.nodes[0],this.voltSource,this.getVoltage()):a.stampVoltageSource(0,this.nodes[0],this.voltSource)},b.prototype.doStep=function(a){return this.waveform!==k.WF_DC?a.updateVoltageSource(0,this.nodes[0],this.voltSource,this.getVoltage()):void 0},b.prototype.hasGroundConnection=function(){return!0},b}(k),b.exports=h}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15,"./VoltageElm.coffee":23,"./AntennaElm.coffee":51}],32:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../../settings/settings.coffee"),d=a("../../render/drawHelper.coffee"),g=a("../../geom/polygon.coffee"),h=a("../../geom/rectangle.coffee"),f=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),e=function(a){function b(a,c,d,e,f,g){b.__super__.constructor.call(this,a,c,d,e,f,g),this.lastv1=0,this.lastv2=0,this.ids=0,this.mode=0,this.gm=0,this.vt=1.5,this.pcircler=3,this.src=[],this.drn=[],this.gate=[],this.pcircle=[],this.pnp=0!==(f&b.FLAG_PNP)?-1:1,this.noDiagonal=!0,this.vt=this.getDefaultThreshold(),this.hs=16,g&&g.length>0&&("string"==typeof g&&(g=g.split(" ")),this.vt||(this.vt=g[0]))}return k(b,a),b.FLAG_PNP=1,b.FLAG_SHOWVT=2,b.FLAG_DIGITAL=4,b.prototype.getDefaultThreshold=function(){return 1.5},b.prototype.getBeta=function(){return.02},b.prototype.nonLinear=function(){return!0},b.prototype.toString=function(){return"MosfetElm"},b.prototype.drawDigital=function(){return 0!==(this.flags&b.FLAG_DIGITAL)},b.prototype.reset=function(){return this.lastv1=this.lastv2=this.volts[0]=this.volts[1]=this.volts[2]=this.curcount=0},b.prototype.dump=function(){return b.__super__.dump.call(this)+" "+this.vt},b.prototype.getDumpType=function(){return"f"},b.prototype.draw=function(a){var c,e,f,g,h,i,j,k,l;for(this.setBboxPt(this.point1,this.point2,this.hs),c=d.getVoltageColor(this.volts[1]),a.drawThickLinePt(this.src[0],this.src[1],c),c=d.getVoltageColor(this.volts[2]),a.drawThickLinePt(this.drn[0],this.drn[1],c),j=6,i=1/j,e=l=0;j>=0?j>l:l>j;e=j>=0?++l:--l)k=this.volts[1]+(this.volts[2]-this.volts[1])*e/j,c=d.getVoltageColor(k),f=d.interpPoint(this.src[1],this.drn[1],e*i),g=d.interpPoint(this.src[1],this.drn[1],(e+1)*i),a.drawThickLinePt(f,g,c);return c=d.getVoltageColor(this.volts[1]),a.drawThickLinePt(this.src[1],this.src[2],c),c=d.getVoltageColor(this.volts[2]),a.drawThickLinePt(this.drn[1],this.drn[2],c),this.drawDigital()||(c=d.getVoltageColor(1===this.pnp?this.volts[1]:this.volts[2]),a.drawThickPolygonP(this.arrowPoly,c)),a.drawThickPolygonP(this.arrowPoly),c=d.getVoltageColor(this.volts[0]),a.drawThickLinePt(this.point1,this.gate[1],c),a.drawThickLinePt(this.gate[0],this.gate[2],c),this.drawDigital()&&-1===this.pnp,0!==(this.flags&b.FLAG_SHOWVT)&&(h=""+this.vt*this.pnp),this.drawDots(this.src[0],this.src[1],a),this.drawDots(this.src[1],this.drn[1],a),this.drawDots(this.drn[1],this.drn[0],a),this.drawPosts(a)},b.prototype.getPost=function(a){return 0===a?this.point1:1===a?this.src[0]:this.drn[0]},b.prototype.getCurrent=function(){return this.ids},b.prototype.getPower=function(){return this.ids*(this.volts[2]-this.volts[1])},b.prototype.getPostCount=function(){return 3},b.prototype.setPoints=function(){var a,e,f,g,h,i;return b.__super__.setPoints.call(this),e=this.hs*this.dsign,this.src=c.newPointArray(3),this.drn=c.newPointArray(3),f=d.interpPoint2(this.point1,this.point2,1,-e),this.src[0]=f[0],this.drn[0]=f[1],g=d.interpPoint2(this.point1,this.point2,1-22/this.dn,-e),this.src[1]=g[0],this.drn[1]=g[1],h=d.interpPoint2(this.point1,this.point2,1-22/this.dn,4*-e/3),this.src[2]=h[0],this.drn[2]=h[1],this.gate=c.newPointArray(3),i=d.interpPoint2(this.point1,this.point2,1-28/this.dn,e/2),this.gate[0]=i[0],this.gate[2]=i[1],this.gate[1]=d.interpPoint(this.gate[0],this.gate[2],.5),console.log("GATE: "+this.gate[1]),this.drawDigital()?-1===this.pnp?(this.gate[1]=d.interpPoint(this.point1,this.point2,1-36/this.dn),a=this.dsign<0?32:31,this.pcircle=d.interpPoint(this.point1,this.point2,1-a/this.dn),this.pcircler=3):void 0:this.arrowPoly=1===this.pnp?d.calcArrow(this.src[1],this.src[0],10,4):d.calcArrow(this.drn[0],this.drn[1],12,5)},b.prototype.stamp=function(a){return a.stampNonLinear(this.nodes[1]),a.stampNonLinear(this.nodes[2])},b.prototype.doStep=function(a){var b,c,d,e,f,g,h,i,j,k,l;return l=new Array(3),l[0]=this.volts[0],l[1]=this.volts[1],l[2]=this.volts[2],l[1]>this.lastv1+.5&&(l[1]=this.lastv1+.5),l[1]<this.lastv1-.5&&(l[1]=this.lastv1-.5),l[2]>this.lastv2+.5&&(l[2]=this.lastv2+.5),l[2]<this.lastv2-.5&&(l[2]=this.lastv2-.5),i=1,d=2,this.pnp*l[1]>this.pnp*l[2]&&(i=2,d=1),e=0,k=l[e]-l[i],j=l[d]-l[i],(Math.abs(this.lastv1-l[1])>.01||Math.abs(this.lastv2-l[2])>.01)&&(this.getParentCircuit().converged=!1),this.lastv1=l[1],this.lastv2=l[2],g=k,f=j,k*=this.pnp,j*=this.pnp,this.ids=0,this.gm=0,b=0,c=this.getBeta(),k>.5&&this instanceof JFetElm?void Circuit.halt("JFET is reverse biased!",this):(k<this.vt?(b=1e-8,this.ids=j*b,this.mode=0):j<k-this.vt?(this.ids=c*((k-this.vt)*j-j*j*.5),this.gm=c*j,b=c*(k-j-this.vt),this.mode=1):(this.gm=c*(k-this.vt),b=1e-8,this.ids=.5*c*(k-this.vt)*(k-this.vt)+(j-(k-this.vt))*b,this.mode=2),h=-this.pnp*this.ids+b*f+this.gm*g,a.stampMatrix(this.nodes[d],this.nodes[d],b),a.stampMatrix(this.nodes[d],this.nodes[i],-b-this.gm),a.stampMatrix(this.nodes[d],this.nodes[e],this.gm),a.stampMatrix(this.nodes[i],this.nodes[d],-b),a.stampMatrix(this.nodes[i],this.nodes[i],b+this.gm),a.stampMatrix(this.nodes[i],this.nodes[e],-this.gm),a.stampRightSide(this.nodes[d],h),a.stampRightSide(this.nodes[i],-h),2===i&&1===this.pnp||1===i&&-1===this.pnp?this.ids=-this.ids:void 0)},b.prototype.getFetInfo=function(a,b){return a[0]=(-1===this.pnp?"p-":"n-")+b,a[0]+=" (Vt = "+d.getVoltageText(this.pnp*this.vt)+")",a[1]=(1===this.pnp?"Ids = ":"Isd = ")+d.getCurrentText(this.ids),a[2]="Vgs = "+d.getVoltageText(this.volts[0]-this.volts[-1===this.pnp?2:1]),a[3]=(1===this.pnp?"Vds = ":"Vsd = ")+d.getVoltageText(this.volts[2]-this.volts[1]),a[4]=0===this.mode?"off":1===this.mode?"linear":"saturation",a[5]="gm = "+d.getUnitText(this.gm,"A/V")},b.prototype.getInfo=function(a){return this.getFetInfo(a,"MOSFET")},b.prototype.canViewInScope=function(){return!0},b.prototype.getVoltageDiff=function(){return this.volts[2]-this.volts[1]},b.prototype.getConnection=function(a,b){return!(0===a||0===b)},b}(c),b.exports=e}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],34:[function(a,b){(function(){var c,d,e,f,g,h,i,j,k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../../settings/settings.coffee"),d=a("../../render/drawHelper.coffee"),f=a("../../geom/polygon.coffee"),h=a("../../geom/rectangle.coffee"),e=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),g=a("./RailElm.coffee"),j=function(a){function b(a,c,d,e,f,g){b.__super__.constructor.call(this,a,c,d,e,f,g),this.frequency=this.maxVoltage}return l(b,a),b.prototype.dump=function(){return b.__super__.dump.call(this)},b.prototype.getDumpType=function(){return 172},b.prototype.createSlider=function(){},b.prototype.getVoltageDiff=function(){return this.volts[0]},b.prototype.getVoltage=function(){return b.__super__.getVoltage.call(this)},b.prototype.destroy=function(){},b.prototype.getEditInfo=function(a){var b;return 0===a?new EditInfo("Min Voltage",bias,-20,20):1===a?new EditInfo("Max Voltage",maxVoltage,-20,20):2===a?(b=new EditInfo("Slider Text",0,-1,-1),b.text=sliderText,b):null},b.prototype.setEditValue=function(a,b){var c,d,e;return 0===a&&(c=b.value),1===a&&(d=b.value),2===a?(e=b.textf.getText(),label.setText(e)):void 0},b}(g),b.exports=j}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15,"./RailElm.coffee":31}],33:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("../../settings/settings.coffee"),d=a("../../render/drawHelper.coffee"),f=a("../../geom/polygon.coffee"),g=a("../../geom/rectangle.coffee"),e=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),i=function(a){function b(a,c,d,f,g,h){var i,j,k,l;b.__super__.constructor.call(this,a,c,d,f,g),this.beta=100,this.rect=[],this.coll=[],this.emit=[],this.base=new e,this.pnp=0,this.gmin=0,this.ie=0,this.ic=0,this.ib=0,this.rectPoly=0,this.arrowPoly=0,this.vt=.025,this.vdcoef=1/this.vt,this.rgain=.5,this.lastvbc=0,this.lastvbe=0,this.leakage=1e-13,h&&h.length>0&&("string"==typeof h&&(h=h.split(" ")),l=h.shift(),l&&(this.pnp=parseInt(l)),k=h.shift(),k&&(this.lastvbe=parseFloat(k)),j=h.shift(),j&&(this.lastvbc=parseFloat(j)),i=h.shift(),i&&(this.beta=parseFloat(i))),this.volts[0]=0,this.volts[1]=-this.lastvbe,this.volts[2]=-this.lastvbc,this.setup()}return k(b,a),b.FLAG_FLIP=1,b.prototype.setup=function(){return this.vcrit=this.vt*Math.log(this.vt/(Math.sqrt(2)*this.leakage)),this.fgain=this.beta/(this.beta+1),this.noDiagonal=!0},b.prototype.nonLinear=function(){return!0},b.prototype.reset=function(){return this.volts[0]=this.volts[1]=this.volts[2]=0,this.lastvbc=this.lastvbe=this.curcount_c=this.curcount_e=this.curcount_b=0},b.prototype.getDumpType=function(){return"t"},b.prototype.dump=function(){return b.__super__.dump.call(this)+" "+this.pnp+" "+(this.volts[0]-this.volts[1])+" "+(this.volts[0]-this.volts[2])+" "+this.beta},b.prototype.draw=function(a){var b;return this.setBboxPt(this.point1,this.point2,16),b=d.getVoltageColor(this.volts[1]),a.drawThickLinePt(this.coll[0],this.coll[1],b),b=d.getVoltageColor(this.volts[2]),a.drawThickLinePt(this.emit[0],this.emit[1],b),b=d.getVoltageColor(this.volts[0]),a.drawThickLinePt(this.point1,this.base,b),this.drawDots(this.base,this.point1,a),this.drawDots(this.coll[1],this.coll[0],a),this.drawDots(this.emit[1],this.emit[0],a),b=d.getVoltageColor(this.volts[0]),a.drawThickPolygonP(this.rectPoly,b),this.drawPosts(a)},b.prototype.getPost=function(a){return 0===a?this.point1:1===a?this.coll[0]:this.emit[0]},b.prototype.getPostCount=function(){return 3},b.prototype.getPower=function(){return(this.volts[0]-this.volts[2])*this.ib+(this.volts[1]-this.volts[2])*this.ic},b.prototype.setPoints=function(){var a,f,g,h,i,j,k;return b.__super__.setPoints.call(this),a=16,0!==(this.flags&b.FLAG_FLIP)&&(this.dsign=-this.dsign),f=a*this.dsign*this.pnp,this.coll=c.newPointArray(2),this.emit=c.newPointArray(2),h=d.interpPoint2(this.point1,this.point2,1,f),this.coll[0]=h[0],this.emit[0]=h[1],this.rect=c.newPointArray(4),i=d.interpPoint2(this.point1,this.point2,1-16/this.dn,a),this.rect[0]=i[0],this.rect[1]=i[1],j=d.interpPoint2(this.point1,this.point2,1-13/this.dn,a),this.rect[2]=j[0],this.rect[3]=j[1],k=d.interpPoint2(this.point1,this.point2,1-13/this.dn,6*this.dsign*this.pnp),this.coll[1]=k[0],this.emit[1]=k[1],this.base=new e,this.base=d.interpPoint(this.point1,this.point2,1-16/this.dn),this.rectPoly=d.createPolygon(this.rect[0],this.rect[2],this.rect[3],this.rect[1]),1!==this.pnp?(g=d.interpPoint(this.point1,this.point2,1-11/this.dn,-5*this.dsign*this.pnp),this.arrowPoly=d.calcArrow(this.emit[0],g,8,4)):void 0},b.prototype.limitStep=function(a,b){var c,d;return c=0,d=a,a>this.vcrit&&Math.abs(a-b)>this.vt+this.vt&&(b>0?(c=1+(a-b)/this.vt,a=c>0?b+this.vt*Math.log(c):this.vcrit):a=this.vt*Math.log(a/this.vt),this.getParentCircuit().converged=!1),a},b.prototype.stamp=function(a){return a.stampNonLinear(this.nodes[0]),a.stampNonLinear(this.nodes[1]),a.stampNonLinear(this.nodes[2])},b.prototype.doStep=function(a){var b,c,d,e,f,g,h,i,j,k;return i=this.getParentCircuit().Solver.subIterations,j=this.volts[0]-this.volts[1],k=this.volts[0]-this.volts[2],(Math.abs(j-this.lastvbc)>.01||Math.abs(k-this.lastvbe)>.01)&&(this.getParentCircuit.converged=!1),this.gmin=0,i>100&&(this.gmin=Math.exp(-9*Math.log(10)*(1-i/3e3)),this.gmin>.1&&(this.gmin=.1)),j=this.pnp*this.limitStep(this.pnp*j,this.pnp*this.lastvbc),k=this.pnp*this.limitStep(this.pnp*k,this.pnp*this.lastvbe),this.lastvbc=j,this.lastvbe=k,h=this.vdcoef*this.pnp,b=Math.exp(j*h),c=Math.exp(k*h),1>c&&(c=1),this.ie=this.pnp*this.leakage*(-(c-1)+this.rgain*(b-1)),this.ic=this.pnp*this.leakage*(this.fgain*(c-1)-(b-1)),this.ib=-(this.ie+this.ic),g=-this.leakage*this.vdcoef*c,f=this.rgain*this.leakage*this.vdcoef*b,e=-g*this.fgain,d=-f*(1/this.rgain),a.stampMatrix(this.nodes[0],this.nodes[0],-g-f-e-d+2*this.gmin),a.stampMatrix(this.nodes[0],this.nodes[1],f+d-this.gmin),a.stampMatrix(this.nodes[0],this.nodes[2],g+e-this.gmin),a.stampMatrix(this.nodes[1],this.nodes[0],e+d-this.gmin),a.stampMatrix(this.nodes[1],this.nodes[1],-d+this.gmin),a.stampMatrix(this.nodes[1],this.nodes[2],-e),a.stampMatrix(this.nodes[2],this.nodes[0],g+f-this.gmin),a.stampMatrix(this.nodes[2],this.nodes[1],-f),a.stampMatrix(this.nodes[2],this.nodes[2],-g+this.gmin),a.stampRightSide(this.nodes[0],-this.ib-(f+d)*j-(g+e)*k),a.stampRightSide(this.nodes[1],-this.ic+e*k+d*j),a.stampRightSide(this.nodes[2],-this.ie+g*k+f*j)},b.prototype.getInfo=function(a){var b,c,e;return a[0]="transistor ("+(-1===this.pnp?"PNP)":"NPN)")+" beta="+this.beta.toFixed(4),a[0]="",b=this.volts[0]-this.volts[1],c=this.volts[0]-this.volts[2],e=this.volts[1]-this.volts[2],a[1]=b*this.pnp>.2?c*this.pnp>.2?"saturation":"reverse active":c*this.pnp>.2?"fwd active":"cutoff",a[2]="Ic = "+d.getCurrentText(this.ic),a[3]="Ib = "+d.getCurrentText(this.ib),a[4]="Vbe = "+d.getVoltageText(c),a[5]="Vbc = "+d.getVoltageText(b),a[6]="Vce = "+d.getVoltageText(e)},b.prototype.getScopeValue=function(a){switch(a){case Oscilloscope.VAL_IB:return this.ib;case Oscilloscope.VAL_IC:return this.ic;case Oscilloscope.VAL_IE:return this.ie;case Oscilloscope.VAL_VBE:return this.volts[0]-this.volts[2];case Oscilloscope.VAL_VBC:return this.volts[0]-this.volts[1];case Oscilloscope.VAL_VCE:return this.volts[1]-this.volts[2]}return 0},b.prototype.getScopeUnits=function(a){switch(a){case Oscilloscope.VAL_IB:case Oscilloscope.VAL_IC:case Oscilloscope.VAL_IE:return"A";default:return"V"}},b.prototype.getEditInfo=function(a){var c;return 0===a?new EditInfo("Beta/hFE",this.beta,10,1e3).setDimensionless():1===a?(c=new EditInfo("",0,-1,-1),c.checkbox=new Checkbox("Swap E/C",0!==(this.flags&b.FLAG_FLIP)),c):null},b.prototype.setEditValue=function(a,c){return 0===a&&(this.beta=c.value,this.setup()),1===a?(c.checkbox.getState()?this.flags|=b.FLAG_FLIP:this.flags&=~b.FLAG_FLIP,this.setPoints()):void 0},b.prototype.canViewInScope=function(){return!0},b}(c),b.exports=i}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],35:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../../settings/settings.coffee"),d=a("../../render/drawHelper.coffee"),g=a("../../geom/polygon.coffee"),h=a("../../geom/rectangle.coffee"),f=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),e=function(a){function b(a,c,d,e,f,g){if(b.__super__.constructor.call(this,a,c,d,e,f),this.opsize=0,this.opwidth=0,this.opaddtext=0,this.maxOut=15,this.minOut=-15,this.gain=1e6,this.reset=!1,this.in1p=[],this.in2p=[],this.textp=[],this.maxOut=15,this.minOut=-15,this.gbw=1e6,g&&g.length>0){"string"==typeof g&&(g=g.split(" "));try{this.maxOut||(this.maxOut=parseFloat(g[0])),this.minOut||(this.minOut=parseFloat(g[1])),this.gbw||(this.gbw=parseFloat(g[2]))}catch(h){}}this.noDiagonal=!0,this.setSize(0!==(f&b.FLAG_SMALL)?1:2),this.setGain()}return k(b,a),b.FLAG_SWAP=1,b.FLAG_SMALL=2,b.FLAG_LOWGAIN=4,b.prototype.setGain=function(){return this.gain=0!==(this.flags&b.FLAG_LOWGAIN)?1e3:1e5},b.prototype.dump=function(){return""+b.__super__.dump.call(this)+" "+this.maxOut+" "+this.minOut+" "+this.gbw},b.prototype.nonLinear=function(){return!0},b.prototype.draw=function(a){var b;return this.setBboxPt(this.point1,this.point2,2*this.opheight),b=d.getVoltageColor(this.volts[0]),a.drawThickLinePt(this.in1p[0],this.in1p[1],b),b=d.getVoltageColor(this.volts[1]),a.drawThickLinePt(this.in2p[0],this.in2p[1],b),a.drawThickPolygonP(this.triangle,this.needsHighlight()?i.SELECT_COLOR:i.FG_COLOR),b=d.getVoltageColor(this.volts[2]),a.drawThickLinePt(this.lead2,this.point2,b),this.drawDots(this.point2,this.lead2,a),this.drawPosts(a)},b.prototype.getPower=function(){return this.volts[2]*this.current},b.prototype.setSize=function(a){return this.opsize=a,this.opheight=8*a,this.opwidth=13*a,this.flags=this.flags&~b.FLAG_SMALL|(1===a?b.FLAG_SMALL:0)},b.prototype.setPoints=function(){var a,e,f,g,h,i,j;return b.__super__.setPoints.call(this),this.setSize(2),f=Math.floor(f>this.dn/2?this.dn/2:this.opwidth),this.calcLeads(2*f),a=Math.floor(this.opheight*this.dsign),0!==(this.flags&b.FLAG_SWAP)&&(a=-a),this.in1p=c.newPointArray(2),this.in2p=c.newPointArray(2),this.textp=c.newPointArray(2),g=d.interpPoint2(this.point1,this.point2,0,a),this.in1p[0]=g[0],this.in2p[0]=g[1],h=d.interpPoint2(this.lead1,this.lead2,0,a),this.in1p[1]=h[0],this.in2p[1]=h[1],i=d.interpPoint2(this.lead1,this.lead2,.2,a),this.textp[0]=i[0],this.textp[1]=i[1],e=c.newPointArray(2),j=d.interpPoint2(this.lead1,this.lead2,0,2*a),e[0]=j[0],e[1]=j[1],this.triangle=d.createPolygonFromArray([e[0],e[1],this.lead2])},b.prototype.getPostCount=function(){return 3},b.prototype.getPost=function(a){return 0===a?this.in1p[0]:1===a?this.in2p[0]:this.point2},b.prototype.getVoltageSourceCount=function(){return 1},b.prototype.getInfo=function(a){var c;return b.__super__.getInfo.call(this),a[0]="op-amp",a[1]="V+ = "+d.getVoltageText(this.volts[1]),a[2]="V- = "+d.getVoltageText(this.volts[0]),c=Math.max(Math.min(this.volts[2],this.maxOut),this.minOut),a[3]="Vout = "+d.getVoltageText(c),a[4]="Iout = "+d.getCurrentText(this.getCurrent()),a[5]="range = "+d.getVoltageText(this.minOut)+" to "+d.getVoltageText(this.maxOut)},b.prototype.stamp=function(a){var b;return b=this.Circuit.numNodes()+this.voltSource,a.stampNonLinear(b),a.stampMatrix(this.nodes[2],b,1)},b.prototype.doStep=function(a){var b,c,d,e;return c=this.volts[1]-this.volts[0],Math.abs(this.lastvd-c)>.1?this.Circuit.converged=!1:(this.volts[2]>this.maxOut+.1||this.volts[2]<this.minOut-.1)&&(this.Circuit.converged=!1),e=0,d=this.Circuit.numNodes()+this.voltSource,b=0,c>=this.maxOut/this.gain&&(this.lastvd>=0||1===MathUtils.getRand(4))?(b=1e-4,e=this.maxOut-b*this.maxOut/this.gain):c<=this.minOut/this.gain&&(this.lastvd<=0||1===MathUtils.getRand(4))?(b=1e-4,e=this.minOut-b*this.minOut/this.gain):b=this.gain,a.stampMatrix(d,this.nodes[0],b),a.stampMatrix(d,this.nodes[1],-b),a.stampMatrix(d,this.nodes[2],1),a.stampRightSide(d,e),this.lastvd=c},b.prototype.getConnection=function(){return!1},b.prototype.toString=function(){return"OpAmpElm"},b.prototype.hasGroundConnection=function(a){return 2===a},b.prototype.getVoltageDiff=function(){return this.volts[2]-this.volts[1]},b.prototype.getDumpType=function(){return"a"},b.prototype.getEditInfo=function(a){return 0===a?new EditInfo("Max Output (V)",this.maxOut,1,20):1===a?new EditInfo("Min Output (V)",this.minOut,-20,0):null},b.prototype.setEditValue=function(a,b){return 0===a&&(this.maxOut=b.value),1===a?this.minOut=b.value:void 0},b}(c),b.exports=e}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],36:[function(a,b){(function(){var c,d,e,f,g,h,i,j,k={}.hasOwnProperty,l=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../../settings/settings.coffee"),e=a("../../render/drawHelper.coffee"),g=a("../../geom/polygon.coffee"),h=a("../../geom/rectangle.coffee"),f=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),d=a("./DiodeElm.coffee"),j=function(a){function b(a,c,e,f,g,h){if(b.__super__.constructor.call(this,a,c,e,f,g,h),this.default_z_voltage=5.6,this.zvoltage=h[0]||this.default_z_voltage,(g&d.FLAG_FWDROP)>0)try{this.fwdrop=h[1]}catch(i){}this.setup()}return l(b,a),b.prototype.setPoints=function(){var a,d,f;return b.__super__.setPoints.call(this),this.calcLeads(16),a=c.newPointArray(2),this.wing=c.newPointArray(2),d=e.interpPoint2(this.lead1,this.lead2,0,this.hs),a[0]=d[0],a[1]=d[1],f=e.interpPoint2(this.lead1,this.lead2,1,this.hs),this.cathode[0]=f[0],this.cathode[1]=f[1],this.wing[0]=e.interpPoint(this.cathode[0],this.cathode[1],-.2,-this.hs),this.wing[1]=e.interpPoint(this.cathode[1],this.cathode[0],-.2,-this.hs),this.poly=e.createPolygonFromArray([a[0],a[1],this.lead2])},b.prototype.draw=function(a){var b,c,d;return this.setBboxPt(this.point1,this.point2,this.hs),c=this.volts[0],d=this.volts[1],this.draw2Leads(a),b=e.getVoltageColor(c),a.drawThickPolygonP(this.poly,b),a.drawThickLinePt(this.cathode[0],this.cathode[1],c),b=e.getVoltageColor(d),a.drawThickLinePt(this.wing[0],this.cathode[0],b),a.drawThickLinePt(this.wing[1],this.cathode[1],b),this.drawDots(this.point2,this.point1,a),this.drawPosts(a)},b.prototype.nonlinear=function(){return!0},b.prototype.setup=function(){return this.diode.leakage=5e-6,b.__super__.setup.call(this)},b.prototype.getDumpType=function(){return"z"},b.prototype.dump=function(){return b.__super__.dump.call(this)+" "+this.zvoltage},b.prototype.getInfo=function(a){return b.__super__.getInfo.call(this,a),a[0]="Zener diode",a[5]="Vz = "+e.getVoltageText(zvoltage)},b.prototype.getEditInfo=function(){},b.prototype.setEditInfo=function(){},b}(d),b.exports=j}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15,"./DiodeElm.coffee":24}],37:[function(a){(function(){var b,c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};return g=a("../../settings/settings.coffee"),c=a("../../render/drawHelper.coffee"),e=a("../../geom/polygon.coffee"),f=a("../../geom/rectangle.coffee"),d=a("../../geom/point.coffee"),b=a("../circuitComponent.coffee"),i=a("./SwitchElm.coffee"),h=function(a){function d(a,b,c,e,f,g){d.__super__.constructor.call(this,a,b,c,e,f,g),this.openhs=16,this.noDiagonal=!0,g&&(this.link=parseInt(g[g.length-1]))}return k(d,a),d.FLAG_CENTER_OFF=1,d.prototype.getDumpType=function(){return"S"},d.prototype.dump=function(){return d.__super__.dump.call(this)+this.link},d.prototype.setPoints=function(){var a,e;return d.__super__.setPoints.call(this),this.calcLeads(32),this.swpoles=b.newPointArray(3),this.swposts=b.newPointArray(2),a=c.interpPoint2(this.lead1,this.lead2,1,this.openhs),this.swpoles[0]=a[0],this.swpoles[1]=a[1],this.swpoles[2]=this.lead2,e=c.interpPoint2(this.point1,this.point2,1,this.openhs),this.swposts[0]=e[0],this.swposts[1]=e[1],this.posCount=this.hasCenterOff()?3:2},d.prototype.draw=function(a){var b;return this.setBbox(this.point1,this.point2,this.openhs),b=c.getVoltageColor(this.volts[0]),a.drawThickLinePt(this.point1,this.lead1,b),b=c.getVoltageColor(this.volts[1]),a.drawThickLinePt(this.swpoles[0],this.swposts[0],b),b=c.getVoltageColor(this.volts[2]),a.drawThickLinePt(this.swpoles[1],this.swposts[1],b),this.needsHighlight()||(b=g.SELECT_COLOR),a.drawThickLinePt(this.lead1,this.swpoles[this.position],b),this.drawDots(this.point1,this.lead1,a),2!==this.position&&this.drawDots(this.swpoles[this.position],this.swposts[this.position],a),this.drawPosts(a)},d.prototype.getPost=function(a){return 0===a?this.point1:this.swposts[a-1]},d.prototype.getPostCount=function(){return 3},d.prototype.calculateCurrent=function(){return 2===this.position?this.current=0:void 0},d.prototype.stamp=function(a){return 2!==this.position?a.stampVoltageSource(this.nodes[0],this.nodes[this.position+1],this.voltSource,0):void 0},d.prototype.getVoltageSourceCount=function(){return 2===this.position?0:1},d.prototype.toggle=function(){var a;return d.__super__.toggle.call(this),0!==this.link?(a=0,getParentCircuit().eachComponent(function(a){var b;return a instanceof d&&(b=a,b.link===this.link)?b.position=this.position:void 0})):void 0},d.prototype.getConnection=function(a,b){return 2===this.position?!1:this.comparePair(a,b,0,1+this.position)},d.prototype.getInfo=function(a){return a[0]=0===this.link?"switch (SPDT)":"switch (DPDT)",a[1]="I = "+this.getCurrentDText(this.getCurrent())},d.prototype.hasCenterOff=function(){return 0!==(this.flags&d.FLAG_CENTER_OFF)},d}(i)}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15,"./SwitchElm.coffee":26}],38:[function(a){(function(){var b,c,d,e,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};return h=a("../../settings/settings.coffee"),c=a("../../render/drawHelper.coffee"),e=a("../../geom/polygon.coffee"),g=a("../../geom/rectangle.coffee"),d=a("../../geom/point.coffee"),b=a("../circuitComponent.coffee"),i=function(a){function b(){var a;if(b.__super__.constructor.call(this,xa,ya,xb,yb,f),this.text="hello",this.lines=new Array,this.lines.add(text),this.size=24,a)for("string"==typeof a&&(a=a.split(" ")),this.size=Math.floor(a.shift()),this.text=a.shift();0!==a.length;)this.text+=" "+a.shift()}return k(b,a),b.FLAG_CENTER=1,b.FLAG_BAR=2,b.prototype.split=function(){return this.lines=this.text.split("\n")},b.prototype.dump=function(){return b.__super__.dump.call(this)+" "+this.size+" "+this.text},b.prototype.getDumpType=function(){return"x"},b.prototype.drag=function(a,b){return this.x1=a,this.y=b,this.x2=a+16,this.y2=b},b.prototype.draw=function(a){var b,c,d,e,f,g;for(b=this.needsHighlight()?h.SELECT_COLOR:h.TEXT_COLOR,this.setBbox(this.x1,this.y,this.x1,this.y),c=0,g=this.lines,e=0,f=g.length;f>e;e++)d=g[e],a.fillText(d,40,15*c+100),c++;return this.x2=this.boundingBox.x1+this.boundingBox.width,this.y2=this.boundingBox.y+this.boundingBox.height},b.prototype.getEditInfo=function(a){var c;return 0===a?(c=new EditInfo("Text",0,-1,-1),c.text=text,c):1===a?new EditInfo("Size",size,5,100):2===a?(c=new EditInfo("",0,-1,-1),c.checkbox=new Checkbox("Center",0!==(this.flags&b.FLAG_CENTER)),c):3===a?(c=new EditInfo("",0,-1,-1),c.checkbox=new Checkbox("Draw Bar On Top",0!==(this.flags&b.FLAG_BAR)),c):null},b.prototype.setEditValue=function(a,c){return 0===a&&(this.text=c.textf.getText(),this.split()),1===a&&(this.size=Math.floor(c.value)),3===a&&(c.checkbox.getState()?this.flags|=b.FLAG_BAR:this.flags&=~b.FLAG_BAR),2===a?c.checkbox.getState()?this.flags|=b.FLAG_CENTER:this.flags&=~b.FLAG_CENTER:void 0},b.prototype.isCenteredText=function(){return 0!==(this.flags&b.FLAG_CENTER)},b.prototype.getInfo=function(a){return a[0]=this.text},b.prototype.getPostCount=function(){return 0},b}(b)}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],39:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../../settings/settings.coffee"),d=a("../../render/drawHelper.coffee"),f=a("../../geom/polygon.coffee"),h=a("../../geom/rectangle.coffee"),e=a("../../geom/point.coffee"),c=a("../circuitComponent.coffee"),g=function(a){function b(a,c,d,e,f){b.__super__.constructor.call(this,a,c,d,e,f)}return k(b,a),b.FLAG_SHOWVOLTAGE=1,b.prototype.getDumpType=function(){return"p"},b.prototype.toString=function(){return"ProbeElm"},b.prototype.setPoints=function(){var a;return b.__super__.setPoints.call(this),this.point2.y<this.point1.y&&(a=this.point1,this.point1=this.point2,this.point2=this.x1),this.center=d.interpPoint(this.point1,this.point2,.5)
},b.prototype.draw=function(a){var b,c,e,f;return c=8,this.setBboxPt(this.point1,this.point2,c),e=this.dn-32,this.calcLeads(Math.floor(e)),b=this.isSelected()?i.SELECT_COLOR:d.getVoltageColor(this.volts[0]),a.drawThickLinePt(this.point1,this.lead1,b),b=this.isSelected()?i.SELECT_COLOR:d.getVoltageColor(this.volts[1]),a.drawThickLinePt(this.lead2,this.point2,b),this.mustShowVoltage()&&(f=d.getShortUnitText(this.volts[0],"V"),this.drawValues(f,4,a)),this.drawPosts(a)},b.prototype.mustShowVoltage=function(){return 0!==(this.flags&b.FLAG_SHOWVOLTAGE)},b.prototype.getInfo=function(a){return a[0]="scope probe",a[1]="Vd = "+d.getVoltageText(this.getVoltageDiff())},b.prototype.stamp=function(){},b.prototype.getConnection=function(){return!1},b.prototype.getEditInfo=function(a){var b;return 0===a?(b=new EditInfo("",0,-1,-1),b.checkbox=new Checkbox("Show Voltage",this.mustShowVoltage()),b):null},b.prototype.setEditValue=function(a,c){var d;return 0===a?c.checkbox.getState()?d=b.FLAG_SHOWVOLTAGE:d&=~b.FLAG_SHOWVOLTAGE:void 0},b}(c),b.exports=g}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}],41:[function(a,b){(function(){var c,d,e,f,g,h;h=a("../../component/components/VoltageElm.coffee"),d=a("../../component/components/CurrentElm.coffee"),g=a("../../component/components/ResistorElm.coffee"),e=a("../../component/components/InductorElm.coffee"),c=a("../../component/components/CapacitorElm.coffee"),f=function(){function a(a,b,c,d,e){this.type=a,this.firstElm=b,this.dest=c,this.elementList=d,this.used=new Array(e)}return a.INDUCT=1,a.VOLTAGE=2,a.SHORT=3,a.CAP_V=4,a.prototype.findPath=function(b,f){var g,i,j,k,l,m,n,o,p,q,r,s,t;if(b===this.dest)return console.log("n1 is @dest"),!0;if(0===f--)return!1;if(this.used[b])return console.log("used "+b),!1;for(this.used[b]=!0,q=this.elementList,l=0,p=q.length;p>l;l++)if(i=q[l],i!==this.firstElm){if(!(i instanceof d&&this.type===a.INDUCT))if(this.type!==a.VOLTAGE||i.isWire()||i instanceof h)if(this.type!==a.SHORT||i.isWire())if(this.type!==a.CAP_V||i.isWire()||i instanceof c||i instanceof h){if(0===b)for(j=m=0,r=i.getPostCount();r>=0?r>m:m>r;j=r>=0?++m:--m)if(i.hasGroundConnection(j)&&this.findPath(i.getNode(j),f))return console.log(i+" has ground (n1 is 0)"),this.used[b]=!1,!0;for(j=n=0,s=i.getPostCount();(s>=0?s>n:n>s)&&(console.log("get post "+i.dump()+" "+i.getNode(j)),i.getNode(j)!==b);j=s>=0?++n:--n);if(j!==i.getPostCount()){if(i.hasGroundConnection(j)&&this.findPath(0,f))return console.log(i+" has ground"),this.used[b]=!1,!0;if(!(this.type===a.INDUCT&&i instanceof e&&(g=i.getCurrent(),0===j&&(g=-g),console.log(i+" > "+this.firstElm+" >> matching "+i+" to "+this.firstElm.getCurrent()),Math.abs(g-this.firstElm.getCurrent())>1e-10)))for(k=o=0,t=i.getPostCount();t>=0?t>o:o>t;k=t>=0?++o:--o)if(j!==k&&(console.log(i+" "+i.getNode(j)+" - "+i.getNode(k)),i.getConnection(j,k)&&this.findPath(i.getNode(k),f)))return this.used[b]=!1,console.log("got findpath "+b),!0}}else console.log("if !(ce.isWire() or ce instanceof CapacitorElm or ce instanceof VoltageElm)");else console.log("(type == SHORT && !ce.isWire())");else console.log("type == VOLTAGE")}else console.log("ce is @firstElm");return this.used[b]=!1,!1},a}(),b.exports=f}).call(this)},{"../../component/components/VoltageElm.coffee":23,"../../component/components/CurrentElm.coffee":30,"../../component/components/ResistorElm.coffee":21,"../../component/components/InductorElm.coffee":28,"../../component/components/CapacitorElm.coffee":27}],50:[function(a,b){(function(){var c,d;c=a("./point.coffee"),d=function(){function a(a){var b;if(this.vertices=[],a&&a.length%2===0)for(b=0;b<a.length;)this.addVertex(a[b],a[b+1]),b+=2}return a.prototype.addVertex=function(a,b){return this.vertices.push(new c(a,b))},a.prototype.getX=function(a){return this.vertices[a].x},a.prototype.getY=function(a){return this.vertices[a].y},a.prototype.numPoints=function(){return this.vertices.length},a}(),b.exports=d}).call(this)},{"./point.coffee":47}],51:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../../settings/settings.coffee"),e=a("../../render/drawHelper.coffee"),g=a("../../geom/polygon.coffee"),h=a("../../geom/rectangle.coffee"),f=a("../../geom/point.coffee"),d=a("../circuitComponent.coffee"),c=function(a){function b(a,c,d,e,f){b.__super__.constructor.call(this,this,a,c,d,e,f)}return k(b,a),b}(d),b.exports=c}).call(this)},{"../../settings/settings.coffee":17,"../../render/drawHelper.coffee":46,"../../geom/polygon.coffee":50,"../../geom/rectangle.coffee":18,"../../geom/point.coffee":47,"../circuitComponent.coffee":15}]},{},[1]);